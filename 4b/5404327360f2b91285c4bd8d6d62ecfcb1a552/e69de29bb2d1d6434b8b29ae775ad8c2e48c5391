{"title":"/issue bombs when not on a branch","tags":["open"],"date":"2009-12-31T18:24:04Z","author":"Simon Chiang <simon.chiang@pinnacol.com>","type":"issue","content":"For instance:\r\n\r\n  % git checkout gitgo-0.1.1\r\n  % gitgo\r\n\r\nThen:\r\n\r\n  http://localhost:8080/issue?state=open\r\n\r\nLeads to:\r\n\r\n  NoMethodError - undefined method `name' for nil:NilClass:\r\n   /Users/Simon/.gem/ruby/1.8/gems/gitgo-0.1.1/lib/gitgo/controllers/issue.rb:145:in `head'\r\n   /Users/Simon/.gem/ruby/1.8/gems/gitgo-0.1.1/views/issue/_at.erb:2:in `render_erb'\r\n   /Users/Simon/.gem/ruby/1.8/gems/gitgo-0.1.1/views/issue/_at.erb:1:in `each'\r\n   /Users/Simon/.gem/ruby/1.8/gems/gitgo-0.1.1/views/issue/_at.erb:1:in `render_erb'\r\n   /Users/Simon/.gem/ruby/1.8/gems/gitgo-0.1.1/views/issue/index.erb:29:in `render_erb'\r\n   /Users/Simon/.gem/ruby/1.8/gems/gitgo-0.1.1/lib/gitgo/controllers/issue.rb:56:in `index'\r\n   /Users/Simon/.gem/ruby/1.8/gems/gitgo-0.1.1/lib/gitgo/controllers/issue.rb:8:in `GET /issue'\r\n   /Users/Simon/.gem/ruby/1.8/gems/rack-1.0.1/lib/rack/content_length.rb:13:in `call'\r\n   /Users/Simon/.gem/ruby/1.8/gems/rack-1.0.1/lib/rack/chunked.rb:15:in `call'\r\n   /Users/Simon/.gem/ruby/1.8/gems/rack-1.0.1/lib/rack/handler/thin.rb:14:in `run'\r\n   /Users/Simon/.gem/ruby/1.8/gems/gitgo-0.1.1/bin/gitgo:54\r\n   /Users/Simon/.gem/ruby/1.8/bin/gitgo:19:in `load'\r\n   /Users/Simon/.gem/ruby/1.8/bin/gitgo:19\r\n\r\nThe problematic line is:\r\n\r\n  @head ||= grit.head.name\r\n\r\nWhich I assume fails because head is nil if you're not on a branch.","at":"c7dbfc6cca9f78e3dd941d6e55126290240d7cc4","state":"open"}