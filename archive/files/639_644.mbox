From news@gmane.org Tue Mar 04 03:33:20 2003
From: Petr Baudis <pasky@ucw.cz>
Subject: Re: [PATCH] Add help details to git help command.
Date: Mon, 18 Apr 2005 12:24:12 +0200
Lines: 54
Message-ID: <20050418102412.GJ1461@pasky.ji.cz>
References: <200504172242.26326.elenstev@mesatop.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Cc: git@vger.kernel.org
X-From: git-owner@vger.kernel.org Mon Apr 18 12:20:47 2005
Return-path: <git-owner@vger.kernel.org>
Received: from vger.kernel.org ([12.107.209.244])
	by ciao.gmane.org with esmtp (Exim 4.43)
	id 1DNTMn-0000j7-PG
	for gcvg-git@gmane.org; Mon, 18 Apr 2005 12:20:34 +0200
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S262020AbVDRKYY (ORCPT <rfc822;gcvg-git@m.gmane.org>);
	Mon, 18 Apr 2005 06:24:24 -0400
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S262021AbVDRKYY
	(ORCPT <rfc822;git-outgoing>); Mon, 18 Apr 2005 06:24:24 -0400
Received: from w241.dkm.cz ([62.24.88.241]:10403 "HELO machine.sinus.cz")
	by vger.kernel.org with SMTP id S262020AbVDRKYS (ORCPT
	<rfc822;git@vger.kernel.org>); Mon, 18 Apr 2005 06:24:18 -0400
Received: (qmail 30115 invoked by uid 2001); 18 Apr 2005 10:24:12 -0000
To: Steven Cole <elenstev@mesatop.com>
Content-Disposition: inline
In-Reply-To: <200504172242.26326.elenstev@mesatop.com>
User-Agent: Mutt/1.4i
X-message-flag: Outlook : A program to spread viri, but it can do mail too.
Sender: git-owner@vger.kernel.org
Precedence: bulk
X-Mailing-List: git@vger.kernel.org
Status: RO

Dear diary, on Mon, Apr 18, 2005 at 06:42:26AM CEST, I got a letter
where Steven Cole <elenstev@mesatop.com> told me that...
> There's a patch at the bottom of this, so please look at that first before
> my reading my whining immediately below.
> 
> I'm having some troubles with git pull, so this is just an ordinary diff.
> Otherwise, I would have used the in-house diff command.
> 
> <troubles>
> patch: **** Only garbage was found in the patch input.
> </troubles>
> <more troubles>
> Tracked branch, applying changes...
> error: bad signature
> error: verify header failed
> read_cache: Invalid argument
> error: bad signature
> error: verify header failed
> error: bad signature
> error: verify header failed
> </more troubles>

read-tree $(tree-id) && update-cache --refresh

The directory cache format changed, so it causes this. I'm hoping to
release 0.5 with good cache prepackaged Real Soon Now (tm). :-)

Note that then you will have to recover from the failed apply. If you
had no local commits, it is easy - put that two IDs git pull told
you to git diff and pipe it to git apply. If you had local commits, and
have already GIT version with merge-base, do just git merge pasky and
proceed with the merge. If you don't have merge-base, pass the first
ID from git track to git merge with the -b argument.

> This patch will provide the comment lines in the shell script associated
> with the command, cleaned up a bit for presentation.
> 
> BUGS: This will also print any comments in the entire file, which may
> not be desired.  If a command name and shell script filename
> do not follow the usual convention, this won't work, e.g. ci for commit.

Hey, those BUGS are the only slightly non-trivial thing on the whole
thing! I could do this patch myself... ;-) Also, you don't want to print
the first newline and the Copyright notices.

-- 
				Petr "Pasky" Baudis
Stuff: http://pasky.or.cz/
C++: an octopus made by nailing extra legs onto a dog. -- Steve Taylor
-
To unsubscribe from this list: send the line "unsubscribe git" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  http://vger.kernel.org/majordomo-info.html



From news@gmane.org Tue Mar 04 03:33:20 2003
From: Petr Baudis <pasky@ucw.cz>
Subject: Re: [PATCH] Pretty-print date in 'git log'
Date: Mon, 18 Apr 2005 12:27:44 +0200
Lines: 26
Message-ID: <20050418102744.GK1461@pasky.ji.cz>
References: <E1DNPz9-0003lm-00@skye.ra.phy.cam.ac.uk> <1113808105.5286.1.camel@localhost.localdomain>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Cc: Sanjoy Mahajan <sanjoy@mrao.cam.ac.uk>, git@vger.kernel.org
X-From: git-owner@vger.kernel.org Mon Apr 18 12:24:06 2005
Return-path: <git-owner@vger.kernel.org>
Received: from vger.kernel.org ([12.107.209.244])
	by ciao.gmane.org with esmtp (Exim 4.43)
	id 1DNTPy-00014j-Ul
	for gcvg-git@gmane.org; Mon, 18 Apr 2005 12:23:51 +0200
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S261398AbVDRK1r (ORCPT <rfc822;gcvg-git@m.gmane.org>);
	Mon, 18 Apr 2005 06:27:47 -0400
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S261401AbVDRK1r
	(ORCPT <rfc822;git-outgoing>); Mon, 18 Apr 2005 06:27:47 -0400
Received: from w241.dkm.cz ([62.24.88.241]:15523 "HELO machine.sinus.cz")
	by vger.kernel.org with SMTP id S261398AbVDRK1q (ORCPT
	<rfc822;git@vger.kernel.org>); Mon, 18 Apr 2005 06:27:46 -0400
Received: (qmail 30644 invoked by uid 2001); 18 Apr 2005 10:27:44 -0000
To: David Woodhouse <dwmw2@infradead.org>
Content-Disposition: inline
In-Reply-To: <1113808105.5286.1.camel@localhost.localdomain>
User-Agent: Mutt/1.4i
X-message-flag: Outlook : A program to spread viri, but it can do mail too.
Sender: git-owner@vger.kernel.org
Precedence: bulk
X-Mailing-List: git@vger.kernel.org
Status: RO

Dear diary, on Mon, Apr 18, 2005 at 09:08:24AM CEST, I got a letter
where David Woodhouse <dwmw2@infradead.org> told me that...
> On Mon, 2005-04-18 at 07:43 +0100, Sanjoy Mahajan wrote:
> > Is this short script good enough:
> 
> It's not far off; thanks. We might as well just do it like that inside
> gitlog.sh. Could do with falling back to just printing the input if it
> can't parse it -- the git repo has old-style dates in it still.

Yes. As far as I'm concerned, I'd put such stuff to git log, and extend
it usage so that it is possible to print individual log entries with it
- just make it accept a _range_ of commits, and then do

	git log $commit $commit

And maybe options for changelog-suitable output (RMK-like) etc.

-- 
				Petr "Pasky" Baudis
Stuff: http://pasky.or.cz/
C++: an octopus made by nailing extra legs onto a dog. -- Steve Taylor
-
To unsubscribe from this list: send the line "unsubscribe git" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  http://vger.kernel.org/majordomo-info.html



From news@gmane.org Tue Mar 04 03:33:20 2003
From: Martin Schlemmer <azarah@nosferatu.za.org>
Subject: [patch] fixup GECOS handling
Date: Mon, 18 Apr 2005 12:36:29 +0200
Lines: 106
Message-ID: <1113820589.16288.5.camel@nosferatu.lan>
Reply-To: azarah@nosferatu.za.org
Mime-Version: 1.0
Content-Type: multipart/signed; micalg=pgp-sha1; protocol="application/pgp-signature"; boundary="=-V47CTBMMf6tb6ci/RnY1"
Content-Transfer-Encoding: 8bit
X-From: git-owner@vger.kernel.org Mon Apr 18 12:29:33 2005
Return-path: <git-owner@vger.kernel.org>
Received: from vger.kernel.org ([12.107.209.244])
	by ciao.gmane.org with esmtp (Exim 4.43)
	id 1DNTVB-0001eW-AG
	for gcvg-git@gmane.org; Mon, 18 Apr 2005 12:29:13 +0200
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S261404AbVDRKdB (ORCPT <rfc822;gcvg-git@m.gmane.org>);
	Mon, 18 Apr 2005 06:33:01 -0400
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S261401AbVDRKdB
	(ORCPT <rfc822;git-outgoing>); Mon, 18 Apr 2005 06:33:01 -0400
Received: from ctb-mesg7.saix.net ([196.25.240.79]:24725 "EHLO
	ctb-mesg7.saix.net") by vger.kernel.org with ESMTP id S261404AbVDRKcy
	(ORCPT <rfc822;git@vger.kernel.org>);
	Mon, 18 Apr 2005 06:32:54 -0400
Received: from gateway.lan (wblv-146-244-27.telkomadsl.co.za [165.146.244.27])
	by ctb-mesg7.saix.net (Postfix) with ESMTP id E14721FB7
	for <git@vger.kernel.org>; Mon, 18 Apr 2005 12:32:50 +0200 (SAST)
Received: from localhost (localhost.localdomain [127.0.0.1])
	by gateway.lan (Postfix) with ESMTP id 856F03A26DB
	for <git@vger.kernel.org>; Mon, 18 Apr 2005 12:39:02 +0200 (SAST)
Received: from gateway.lan ([127.0.0.1])
 by localhost (gateway.lan [127.0.0.1]) (amavisd-new, port 10024) with ESMTP
 id 27883-11 for <git@vger.kernel.org>; Mon, 18 Apr 2005 12:38:54 +0200 (SAST)
Received: from nosferatu.lan (nosferatu.lan [192.168.0.2])
	(using TLSv1 with cipher IDEA-CBC-SHA (128/128 bits))
	(No client certificate requested)
	by gateway.lan (Postfix) with ESMTP id 4E02B3A26DA
	for <git@vger.kernel.org>; Mon, 18 Apr 2005 12:38:54 +0200 (SAST)
To: GIT Mailing Lists <git@vger.kernel.org>
X-Mailer: Evolution 2.2.1.1 
X-Virus-Scanned: by amavisd-new using ClamAV at nosferatu.za.org
Sender: git-owner@vger.kernel.org
Precedence: bulk
X-Mailing-List: git@vger.kernel.org
Status: RO


--=-V47CTBMMf6tb6ci/RnY1
Content-Type: multipart/mixed; boundary="=-bvF8f4aPuP9vDLxU7mhg"


--=-bvF8f4aPuP9vDLxU7mhg
Content-Type: text/plain
Content-Transfer-Encoding: quoted-printable

Hi,

The gecos is delimited by ',' or ';', so we should only use whatever
before the first ',' or ';' for the full name, and not just strip those.
Also, a '.' may be valid in the full name (Foo B. Zooman) or email
(foo.zooman@bar.com).

Signed-off-by: Martin Schlemmer <azarah@gentoo.org>

commit-tree.c: ec53a4565ec0033aaf6df2a48d233ccf4823e8b0
--- 1/commit-tree.c
+++ 2/commit-tree.c     2005-04-18 12:22:18.000000000 +0200
@@ -96,21 +96,6 @@
                if (!c)
                        break;
        }
-
-       /*
-        * Go back, and remove crud from the end: some people
-        * have commas etc in their gecos field
-        */
-       dst--;
-       while (--dst >=3D p) {
-               unsigned char c =3D *dst;
-               switch (c) {
-               case ',': case ';': case '.':
-                       *dst =3D 0;
-                       continue;
-               }
-               break;
-       }
 }

 static const char *month_names[] =3D {
@@ -313,6 +298,11 @@
        if (!pw)
                die("You don't exist. Go away!");
        realgecos =3D pw->pw_gecos;
+       /* The name is seperated from the room no., tel no, etc via [,;] */
+       if (strchr(realgecos, ','))
+               realgecos[strchr(realgecos, ',') - realgecos] =3D '\0';
+       else if (strchr(realgecos, ';'))
+               realgecos[strchr(realgecos, ';') - realgecos] =3D '\0';
        len =3D strlen(pw->pw_name);
        memcpy(realemail, pw->pw_name, len);
        realemail[len] =3D '@';


--=20
Martin Schlemmer


--=-bvF8f4aPuP9vDLxU7mhg
Content-Disposition: attachment; filename=git-gecos.patch
Content-Type: text/x-patch; name=git-gecos.patch; charset=UTF-8
Content-Transfer-Encoding: base64

Y29tbWl0LXRyZWUuYzogZWM1M2E0NTY1ZWMwMDMzYWFmNmRmMmE0OGQyMzNjY2Y0ODIzZThiMA0K
LS0tIDEvY29tbWl0LXRyZWUuYw0KKysrIDIvY29tbWl0LXRyZWUuYwkyMDA1LTA0LTE4IDEyOjIy
OjE4LjAwMDAwMDAwMCArMDIwMA0KQEAgLTk2LDIxICs5Niw2IEBADQogCQlpZiAoIWMpDQogCQkJ
YnJlYWs7DQogCX0NCi0NCi0JLyoNCi0JICogR28gYmFjaywgYW5kIHJlbW92ZSBjcnVkIGZyb20g
dGhlIGVuZDogc29tZSBwZW9wbGUNCi0JICogaGF2ZSBjb21tYXMgZXRjIGluIHRoZWlyIGdlY29z
IGZpZWxkDQotCSAqLw0KLQlkc3QtLTsNCi0Jd2hpbGUgKC0tZHN0ID49IHApIHsNCi0JCXVuc2ln
bmVkIGNoYXIgYyA9ICpkc3Q7DQotCQlzd2l0Y2ggKGMpIHsNCi0JCWNhc2UgJywnOiBjYXNlICc7
JzogY2FzZSAnLic6DQotCQkJKmRzdCA9IDA7DQotCQkJY29udGludWU7DQotCQl9DQotCQlicmVh
azsNCi0JfQ0KIH0NCiANCiBzdGF0aWMgY29uc3QgY2hhciAqbW9udGhfbmFtZXNbXSA9IHsNCkBA
IC0zMTMsNiArMjk4LDExIEBADQogCWlmICghcHcpDQogCQlkaWUoIllvdSBkb24ndCBleGlzdC4g
R28gYXdheSEiKTsNCiAJcmVhbGdlY29zID0gcHctPnB3X2dlY29zOw0KKwkvKiBUaGUgbmFtZSBp
cyBzZXBlcmF0ZWQgZnJvbSB0aGUgcm9vbSBuby4sIHRlbCBubywgZXRjIHZpYSAnLCcgb3IgJzsn
ICovDQorCWlmIChzdHJjaHIocmVhbGdlY29zLCAnLCcpKQ0KKwkJcmVhbGdlY29zW3N0cmNocihy
ZWFsZ2Vjb3MsICcsJykgLSByZWFsZ2Vjb3NdID0gJ1wwJzsNCisJZWxzZSBpZiAoc3RyY2hyKHJl
YWxnZWNvcywgJzsnKSkNCisJCXJlYWxnZWNvc1tzdHJjaHIocmVhbGdlY29zLCAnOycpIC0gcmVh
bGdlY29zXSA9ICdcMCc7DQogCWxlbiA9IHN0cmxlbihwdy0+cHdfbmFtZSk7DQogCW1lbWNweShy
ZWFsZW1haWwsIHB3LT5wd19uYW1lLCBsZW4pOw0KIAlyZWFsZW1haWxbbGVuXSA9ICdAJzsNCg==


--=-bvF8f4aPuP9vDLxU7mhg--

--=-V47CTBMMf6tb6ci/RnY1
Content-Type: application/pgp-signature; name=signature.asc
Content-Description: This is a digitally signed message part

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.1 (GNU/Linux)

iD8DBQBCY42tqburzKaJYLYRAvBqAJ4r1SZ33JK6zaKiOlbh52P+ihMvlgCgiTbN
2DEveuKXtXixHEPGbmZlHIw=
=NTHT
-----END PGP SIGNATURE-----

--=-V47CTBMMf6tb6ci/RnY1--

-
To unsubscribe from this list: send the line "unsubscribe git" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  http://vger.kernel.org/majordomo-info.html



From news@gmane.org Tue Mar 04 03:33:20 2003
From: Martin Schlemmer <azarah@nosferatu.za.org>
Subject: [pasky] recent changes to gitdiff.sh
Date: Mon, 18 Apr 2005 12:40:08 +0200
Lines: 40
Message-ID: <1113820808.16288.9.camel@nosferatu.lan>
Reply-To: azarah@nosferatu.za.org
Mime-Version: 1.0
Content-Type: multipart/signed; micalg=pgp-sha1; protocol="application/pgp-signature"; boundary="=-p3vSeJ40vYpYjjiDhnw9"
Content-Transfer-Encoding: 8bit
Cc: Petr Baudis <pasky@ucw.cz>
X-From: git-owner@vger.kernel.org Mon Apr 18 12:33:23 2005
Return-path: <git-owner@vger.kernel.org>
Received: from vger.kernel.org ([12.107.209.244])
	by ciao.gmane.org with esmtp (Exim 4.43)
	id 1DNTZ4-000258-7M
	for gcvg-git@gmane.org; Mon, 18 Apr 2005 12:33:14 +0200
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S262021AbVDRKge (ORCPT <rfc822;gcvg-git@m.gmane.org>);
	Mon, 18 Apr 2005 06:36:34 -0400
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S262023AbVDRKge
	(ORCPT <rfc822;git-outgoing>); Mon, 18 Apr 2005 06:36:34 -0400
Received: from ctb-mesg5.saix.net ([196.25.240.77]:51604 "EHLO
	ctb-mesg5.saix.net") by vger.kernel.org with ESMTP id S262021AbVDRKg0
	(ORCPT <rfc822;git@vger.kernel.org>);
	Mon, 18 Apr 2005 06:36:26 -0400
Received: from gateway.lan (wblv-146-244-27.telkomadsl.co.za [165.146.244.27])
	by ctb-mesg5.saix.net (Postfix) with ESMTP id 687B66A07;
	Mon, 18 Apr 2005 12:36:15 +0200 (SAST)
Received: from localhost (localhost.localdomain [127.0.0.1])
	by gateway.lan (Postfix) with ESMTP id C0E1D3A26DB;
	Mon, 18 Apr 2005 12:42:27 +0200 (SAST)
Received: from gateway.lan ([127.0.0.1])
 by localhost (gateway.lan [127.0.0.1]) (amavisd-new, port 10024) with ESMTP
 id 27883-12; Mon, 18 Apr 2005 12:42:23 +0200 (SAST)
Received: from nosferatu.lan (nosferatu.lan [192.168.0.2])
	(using TLSv1 with cipher IDEA-CBC-SHA (128/128 bits))
	(No client certificate requested)
	by gateway.lan (Postfix) with ESMTP id 129FB3A26DA;
	Mon, 18 Apr 2005 12:42:23 +0200 (SAST)
To: GIT Mailing Lists <git@vger.kernel.org>
X-Mailer: Evolution 2.2.1.1 
X-Virus-Scanned: by amavisd-new using ClamAV at nosferatu.za.org
Sender: git-owner@vger.kernel.org
Precedence: bulk
X-Mailing-List: git@vger.kernel.org
Status: RO


--=-p3vSeJ40vYpYjjiDhnw9
Content-Type: text/plain
Content-Transfer-Encoding: quoted-printable

Hi,

I see the recent changes to gitdiff.sh requires you to pass -r (git diff
-r local:$tracking) even if you separate the branches via ':'.  Is this
intended (seems like it)?  If so, then gittrack.sh, gitpull.sh and
gitmerge.sh needs to be updated ...

(I did not want to add a patch as I am not sure which it is)


Thanks,

--=20
Martin Schlemmer


--=-p3vSeJ40vYpYjjiDhnw9
Content-Type: application/pgp-signature; name=signature.asc
Content-Description: This is a digitally signed message part

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.1 (GNU/Linux)

iD8DBQBCY46IqburzKaJYLYRAh3ZAKCW2F6xdte7uZb1Lm4DEHPc89eGrQCggJ03
QmzIA1GVILkRXv7+mkXEF1o=
=XR6G
-----END PGP SIGNATURE-----

--=-p3vSeJ40vYpYjjiDhnw9--

-
To unsubscribe from this list: send the line "unsubscribe git" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  http://vger.kernel.org/majordomo-info.html



From news@gmane.org Tue Mar 04 03:33:20 2003
From: Petr Baudis <pasky@ucw.cz>
Subject: Re: [pasky] recent changes to gitdiff.sh
Date: Mon, 18 Apr 2005 12:40:38 +0200
Lines: 26
Message-ID: <20050418104038.GM1461@pasky.ji.cz>
References: <1113820808.16288.9.camel@nosferatu.lan>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Cc: GIT Mailing Lists <git@vger.kernel.org>
X-From: git-owner@vger.kernel.org Mon Apr 18 12:37:08 2005
Return-path: <git-owner@vger.kernel.org>
Received: from vger.kernel.org ([12.107.209.244])
	by ciao.gmane.org with esmtp (Exim 4.43)
	id 1DNTca-0002RW-Hs
	for gcvg-git@gmane.org; Mon, 18 Apr 2005 12:36:52 +0200
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S262022AbVDRKko (ORCPT <rfc822;gcvg-git@m.gmane.org>);
	Mon, 18 Apr 2005 06:40:44 -0400
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S262024AbVDRKko
	(ORCPT <rfc822;git-outgoing>); Mon, 18 Apr 2005 06:40:44 -0400
Received: from w241.dkm.cz ([62.24.88.241]:32419 "HELO machine.sinus.cz")
	by vger.kernel.org with SMTP id S262022AbVDRKkk (ORCPT
	<rfc822;git@vger.kernel.org>); Mon, 18 Apr 2005 06:40:40 -0400
Received: (qmail 32139 invoked by uid 2001); 18 Apr 2005 10:40:39 -0000
To: Martin Schlemmer <azarah@nosferatu.za.org>
Content-Disposition: inline
In-Reply-To: <1113820808.16288.9.camel@nosferatu.lan>
User-Agent: Mutt/1.4i
X-message-flag: Outlook : A program to spread viri, but it can do mail too.
Sender: git-owner@vger.kernel.org
Precedence: bulk
X-Mailing-List: git@vger.kernel.org
Status: RO

Dear diary, on Mon, Apr 18, 2005 at 12:40:08PM CEST, I got a letter
where Martin Schlemmer <azarah@nosferatu.za.org> told me that...
> Hi,

Hello,

> I see the recent changes to gitdiff.sh requires you to pass -r (git diff
> -r local:$tracking) even if you separate the branches via ':'.  Is this
> intended (seems like it)?

yes. This brings the usage style in sync with the rest of the world. :-)

> If so, then gittrack.sh, gitpull.sh and gitmerge.sh needs to be
> updated ...

I hopes I updated all the places. If I missed anything, please say what.

-- 
				Petr "Pasky" Baudis
Stuff: http://pasky.or.cz/
C++: an octopus made by nailing extra legs onto a dog. -- Steve Taylor
-
To unsubscribe from this list: send the line "unsubscribe git" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  http://vger.kernel.org/majordomo-info.html



