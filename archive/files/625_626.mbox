From news@gmane.org Tue Mar 04 03:33:20 2003
From: Steven Cole <elenstev@mesatop.com>
Subject: [PATCH] Add help details to git help command.
Date: Sun, 17 Apr 2005 22:42:26 -0600
Lines: 92
Message-ID: <200504172242.26326.elenstev@mesatop.com>
Mime-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Cc: git@vger.kernel.org
X-From: git-owner@vger.kernel.org Mon Apr 18 06:42:54 2005
Return-path: <git-owner@vger.kernel.org>
Received: from vger.kernel.org ([12.107.209.244])
	by ciao.gmane.org with esmtp (Exim 4.43)
	id 1DNO5n-0001gR-FY
	for gcvg-git@gmane.org; Mon, 18 Apr 2005 06:42:39 +0200
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S261656AbVDREqb (ORCPT <rfc822;gcvg-git@m.gmane.org>);
	Mon, 18 Apr 2005 00:46:31 -0400
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S261665AbVDREqb
	(ORCPT <rfc822;git-outgoing>); Mon, 18 Apr 2005 00:46:31 -0400
Received: from taco.zianet.com ([216.234.192.159]:51972 "HELO taco.zianet.com")
	by vger.kernel.org with SMTP id S261656AbVDREqV (ORCPT
	<rfc822;git@vger.kernel.org>); Mon, 18 Apr 2005 00:46:21 -0400
Received: (qmail 39555 invoked from network); 18 Apr 2005 04:46:19 -0000
Received: from 216-31-65-214.zianet.com (216.31.65.214)
  by 0 with SMTP; 18 Apr 2005 04:46:19 -0000
To: Petr Baudis <pasky@ucw.cz>
User-Agent: KMail/1.6.1
Content-Disposition: inline
Sender: git-owner@vger.kernel.org
Precedence: bulk
X-Mailing-List: git@vger.kernel.org
Status: RO

There's a patch at the bottom of this, so please look at that first before
my reading my whining immediately below.

I'm having some troubles with git pull, so this is just an ordinary diff.
Otherwise, I would have used the in-house diff command.

<troubles>
patch: **** Only garbage was found in the patch input.
</troubles>
<more troubles>
Tracked branch, applying changes...
error: bad signature
error: verify header failed
read_cache: Invalid argument
error: bad signature
error: verify header failed
error: bad signature
error: verify header failed
</more troubles>

Anyway, it's late, and I'm sure there is an easy fix to the above.

Here is a patch which provides the comment lines in the associated
script files when the git help command is invoked with an argument
thusly:

[steven@spc git-pasky-new]$ ./git help merge

 Merge a branch to the current tree.
 Copyright (c) Petr Baudis, 2005

 Takes a parameter identifying the branch to be merged.
 Optional "-b base_commit" parameter specifies the base for the
 merge. "-a" parameter may come first to tell git merge
 to check out the full tree to the merge tree.

 It creates a new ,,merge/ directory, which is git-controlled
 but has only the changed files checked out. You then have to
 examine it and then do git commit, which will also automatically
 bring your working tree up-to-date.

---------
This patch will provide the comment lines in the shell script associated
with the command, cleaned up a bit for presentation.

BUGS: This will also print any comments in the entire file, which may
not be desired.  If a command name and shell script filename
do not follow the usual convention, this won't work, e.g. ci for commit.

Signed-off-by: Steven Cole <elenstev@mesatop.com>

--- gp-newest-orig/git	2005-04-17 22:16:55.000000000 -0600
+++ gp-newest/git	2005-04-17 22:19:49.000000000 -0600
@@ -19,6 +19,11 @@
 
 
 help () {
+
+command=$1
+scriptfile=git$command.sh
+
+if [ ! $command ]; then
 	cat <<__END__
 The GIT scripted toolkit  $(gitversion.sh)
 
@@ -48,7 +53,10 @@
 	update		COMMIT_ID
 	version
 
+Additional help is available with: git help COMMAND
+
 Note that these expressions can be used interchangably as "ID"s:
+
 	empty string (current HEAD)
 	local (the local branch if tracking a remote one)
 	remote name (as registered with git addremote)
@@ -57,6 +65,10 @@
 	commit object hash (as returned by commit-id)
 	tree object hash (accepted only by some commands)
 __END__
+fi
+if [ ! $scriptfile = "git.sh" ]; then
+grep ^# $scriptfile | grep -v "!/bin" | cut -c 2-
+fi
 }
 
 
-
To unsubscribe from this list: send the line "unsubscribe git" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  http://vger.kernel.org/majordomo-info.html



From news@gmane.org Tue Mar 04 03:33:20 2003
From: Paul Jackson <pj@sgi.com>
Subject: Re: fix mktemp (remove mktemp ;)
Date: Sun, 17 Apr 2005 21:47:07 -0700
Organization: SGI
Lines: 14
Message-ID: <20050417214707.11a0ce70.pj@sgi.com>
References: <20050416170221.38b3e66c.pj@sgi.com>
	<E1DNMVX-00013d-00@gondolin.me.apana.org.au>
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
Cc: pasky@ucw.cz, git@vger.kernel.org, mj@ucw.cz
X-From: git-owner@vger.kernel.org Mon Apr 18 06:44:12 2005
Return-path: <git-owner@vger.kernel.org>
Received: from vger.kernel.org ([12.107.209.244])
	by ciao.gmane.org with esmtp (Exim 4.43)
	id 1DNO6i-0001jv-Ng
	for gcvg-git@gmane.org; Mon, 18 Apr 2005 06:43:37 +0200
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S261665AbVDREr2 (ORCPT <rfc822;gcvg-git@m.gmane.org>);
	Mon, 18 Apr 2005 00:47:28 -0400
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S261666AbVDREr2
	(ORCPT <rfc822;git-outgoing>); Mon, 18 Apr 2005 00:47:28 -0400
Received: from omx3-ext.sgi.com ([192.48.171.20]:24040 "EHLO omx3.sgi.com")
	by vger.kernel.org with ESMTP id S261665AbVDREr0 (ORCPT
	<rfc822;git@vger.kernel.org>); Mon, 18 Apr 2005 00:47:26 -0400
Received: from cthulhu.engr.sgi.com (cthulhu.engr.sgi.com [192.26.80.2])
	by omx3.sgi.com (8.12.11/8.12.9/linux-outbound_gateway-1.1) with ESMTP id j3I5Asf3009359;
	Sun, 17 Apr 2005 22:10:54 -0700
Received: from vpn2 (mtv-vpn-hw-pj-2.corp.sgi.com [134.15.25.219])
	by cthulhu.engr.sgi.com (SGI-8.12.5/8.12.5) with SMTP id j3I4lClU15596293;
	Sun, 17 Apr 2005 21:47:14 -0700 (PDT)
To: Herbert Xu <herbert@gondor.apana.org.au>
In-Reply-To: <E1DNMVX-00013d-00@gondolin.me.apana.org.au>
X-Mailer: Sylpheed version 1.0.0 (GTK+ 1.2.10; i686-pc-linux-gnu)
Sender: git-owner@vger.kernel.org
Precedence: bulk
X-Mailing-List: git@vger.kernel.org
Status: RO

Herbert wrote:
> mktemp(1) creates the file before exiting.  ... O_EXCL

Aha - right you are.  Thanks for pointing that out.

-- 
                  I won't rest till it's the best ...
                  Programmer, Linux Scalability
                  Paul Jackson <pj@engr.sgi.com> 1.650.933.1373, 1.925.600.0401
-
To unsubscribe from this list: send the line "unsubscribe git" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  http://vger.kernel.org/majordomo-info.html



