From news@gmane.org Tue Mar 04 03:33:20 2003
From: Ingo Molnar <mingo@elte.hu>
Subject: Re: [script] ge: export commits as patches
Date: Tue, 19 Apr 2005 20:56:07 +0200
Lines: 59
Message-ID: <20050419185607.GA26756@elte.hu>
References: <20050419134843.GA19146@elte.hu> <20050419170320.GG12757@pasky.ji.cz>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Cc: git@vger.kernel.org
X-From: git-owner@vger.kernel.org Tue Apr 19 20:53:17 2005
Return-path: <git-owner@vger.kernel.org>
Received: from vger.kernel.org ([12.107.209.244])
	by ciao.gmane.org with esmtp (Exim 4.43)
	id 1DNxps-0000kD-Bk
	for gcvg-git@gmane.org; Tue, 19 Apr 2005 20:52:36 +0200
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S261573AbVDSS4n (ORCPT <rfc822;gcvg-git@m.gmane.org>);
	Tue, 19 Apr 2005 14:56:43 -0400
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S261591AbVDSS4n
	(ORCPT <rfc822;git-outgoing>); Tue, 19 Apr 2005 14:56:43 -0400
Received: from mx1.elte.hu ([157.181.1.137]:16082 "EHLO mx1.elte.hu")
	by vger.kernel.org with ESMTP id S261573AbVDSS4k (ORCPT
	<rfc822;git@vger.kernel.org>); Tue, 19 Apr 2005 14:56:40 -0400
Received: from chiara.elte.hu (chiara.elte.hu [157.181.150.200])
	by mx1.elte.hu (Postfix) with ESMTP id BA44231FF47;
	Tue, 19 Apr 2005 20:55:28 +0200 (CEST)
Received: by chiara.elte.hu (Postfix, from userid 17806)
	id 3AA441FC2; Tue, 19 Apr 2005 20:56:11 +0200 (CEST)
To: Petr Baudis <pasky@ucw.cz>
Content-Disposition: inline
In-Reply-To: <20050419170320.GG12757@pasky.ji.cz>
User-Agent: Mutt/1.4.2.1i
X-ELTE-SpamVersion: MailScanner 4.31.6-itk1 (ELTE 1.2) SpamAssassin 2.63 ClamAV 0.73
X-ELTE-VirusStatus: clean
X-ELTE-SpamCheck: no
X-ELTE-SpamCheck-Details: score=-4.9, required 5.9,
	autolearn=not spam, BAYES_00 -4.90
X-ELTE-SpamLevel: 
X-ELTE-SpamScore: -4
Sender: git-owner@vger.kernel.org
Precedence: bulk
X-Mailing-List: git@vger.kernel.org
Status: RO


* Petr Baudis <pasky@ucw.cz> wrote:

> Dear diary, on Tue, Apr 19, 2005 at 03:48:43PM CEST, I got a letter
> where Ingo Molnar <mingo@elte.hu> told me that...
> > is there any 'export commit as patch' support in git-pasky? I didnt find 
> > any such command (maybe it got added meanwhile), so i'm using the 'ge' 
> > hack below.
> > 
> > e.g. i typically look at commits via 'git log', and then when i see 
> > something interesting, i look at the commit via the 'ge' script. E.g.  
> > "ge 834f6209b22af2941a8640f1e32b0f123c833061" done in the kernel tree 
> > will output a particular commit's header and the patch.
> 
> Nice idea. I will add it, probably as 'git patch'.
> 
> > TREE1=$(cat-file commit 2>/dev/null $1 | head -4 | grep ^tree | cut -d' ' -f2)
> > if [ "$TREE1" = "" ]; then echo 'ge <commit-ID>'; exit -1; fi
> > PARENT=$(cat-file commit 2>/dev/null $1 | head -4 | grep ^parent | cut -d' ' -f2)
> > if [ "$PARENT" = "" ]; then echo 'ge <commit-ID>'; exit -1; fi
> > TREE2=$(cat-file commit 2>/dev/null $PARENT | head -4 | grep ^tree | cut -d' ' -f2)
> > if [ "$TREE2" = "" ]; then echo 'ge <commit-ID>'; exit -1; fi
> 
> commit-id and parent-id tools might be useful. ;-)

find a cleaned up 'ge' script below.

and please fix gitXnormid.sh to simply echo nothing and return with a -1 
exit value when a nonsensical ID is passed to it. Right now the output 
is quite ugly if you do 'ge blah'.

	Ingo

#!/bin/bash

usage ()
{
 echo 'usage: ge <commit-ID>'
 exit -1
}

if [ $# != 1 ]; then
 usage
fi

ME=    $(commit-id $1);      [ "$ME"     = "" ] && usage
PARENT=$(parent-id $ME);     [ "$PARENT" = "" ] && usage
TREE1= $(tree-id   $ME);     [ "$TREE1"  = "" ] && usage
TREE2= $(tree-id   $PARENT); [ "$TREE2"  = "" ] && usage

cat-file commit $ME
echo
git diff -r $TREE2:$TREE1

-
To unsubscribe from this list: send the line "unsubscribe git" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  http://vger.kernel.org/majordomo-info.html



From news@gmane.org Tue Mar 04 03:33:20 2003
From: Greg KH <greg@kroah.com>
Subject: Re: [GIT PATCH] I2C and W1 bugfixes for 2.6.12-rc2
Date: Tue, 19 Apr 2005 11:58:07 -0700
Lines: 26
Message-ID: <20050419185807.GA1191@kroah.com>
References: <20050419043938.GA23724@kroah.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Cc: Linus Torvalds <torvalds@osdl.org>,
	Git Mailing List <git@vger.kernel.org>,
	linux-kernel@vger.kernel.org, sensors@stimpy.netroedge.com
X-From: git-owner@vger.kernel.org Tue Apr 19 20:55:03 2005
Return-path: <git-owner@vger.kernel.org>
Received: from vger.kernel.org ([12.107.209.244])
	by ciao.gmane.org with esmtp (Exim 4.43)
	id 1DNxrs-00011Y-7w
	for gcvg-git@gmane.org; Tue, 19 Apr 2005 20:54:40 +0200
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S261628AbVDSS6p (ORCPT <rfc822;gcvg-git@m.gmane.org>);
	Tue, 19 Apr 2005 14:58:45 -0400
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S261594AbVDSS6p
	(ORCPT <rfc822;git-outgoing>); Tue, 19 Apr 2005 14:58:45 -0400
Received: from mail.kroah.org ([69.55.234.183]:38374 "EHLO perch.kroah.org")
	by vger.kernel.org with ESMTP id S261591AbVDSS6m (ORCPT
	<rfc822;git@vger.kernel.org>); Tue, 19 Apr 2005 14:58:42 -0400
Received: from [192.168.0.10] (c-24-22-118-199.hsd1.or.comcast.net [24.22.118.199])
	(authenticated)
	by perch.kroah.org (8.11.6/8.11.6) with ESMTP id j3JIwYi26014;
	Tue, 19 Apr 2005 11:58:34 -0700
Received: from greg by echidna.kroah.org with local (masqmail 0.2.19)
 id 1DNxvD-0JY-00; Tue, 19 Apr 2005 11:58:07 -0700
To: Greg KH <gregkh@suse.de>
Content-Disposition: inline
In-Reply-To: <20050419043938.GA23724@kroah.com>
User-Agent: Mutt/1.5.8i
Sender: git-owner@vger.kernel.org
Precedence: bulk
X-Mailing-List: git@vger.kernel.org
Status: RO

On Mon, Apr 18, 2005 at 09:39:38PM -0700, Greg KH wrote:
> Alright, let's try some small i2c and w1 patches...
> 
> Could you merge with:
> 	kernel.org/pub/scm/linux/kernel/git/gregkh/i2c-2.6.git/

Nice, it looks like the merge of this tree, and my usb tree worked just
fine.

So, what does this now mean?  Is your kernel.org git tree now going to
be the "real" kernel tree that you will be working off of now?  Should
we crank up the nightly snapshots and emails to the -commits list?

Can I rely on the fact that these patches are now in your tree and I can
forget about them? :)

Just wondering how comfortable you feel with your git tree so far.

thanks,

greg k-h
-
To unsubscribe from this list: send the line "unsubscribe git" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  http://vger.kernel.org/majordomo-info.html



From news@gmane.org Tue Mar 04 03:33:20 2003
From: Linus Torvalds <torvalds@osdl.org>
Subject: Re: [PATCH] write-tree performance problems
Date: Tue, 19 Apr 2005 12:03:35 -0700 (PDT)
Lines: 78
Message-ID: <Pine.LNX.4.58.0504191143220.19286@ppc970.osdl.org>
References: <200504191250.10286.mason@suse.com> <Pine.LNX.4.58.0504191017300.19286@ppc970.osdl.org>
 <200504191412.00227.mason@suse.com>
Mime-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
Cc: git@vger.kernel.org
X-From: git-owner@vger.kernel.org Tue Apr 19 20:59:44 2005
Return-path: <git-owner@vger.kernel.org>
Received: from vger.kernel.org ([12.107.209.244])
	by ciao.gmane.org with esmtp (Exim 4.43)
	id 1DNxw2-0001jn-F2
	for gcvg-git@gmane.org; Tue, 19 Apr 2005 20:58:59 +0200
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S261582AbVDSTC5 (ORCPT <rfc822;gcvg-git@m.gmane.org>);
	Tue, 19 Apr 2005 15:02:57 -0400
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S261571AbVDSTC5
	(ORCPT <rfc822;git-outgoing>); Tue, 19 Apr 2005 15:02:57 -0400
Received: from fire.osdl.org ([65.172.181.4]:49637 "EHLO smtp.osdl.org")
	by vger.kernel.org with ESMTP id S261240AbVDSTBr (ORCPT
	<rfc822;git@vger.kernel.org>); Tue, 19 Apr 2005 15:01:47 -0400
Received: from shell0.pdx.osdl.net (fw.osdl.org [65.172.181.6])
	by smtp.osdl.org (8.12.8/8.12.8) with ESMTP id j3JJ1bs4006092
	(version=TLSv1/SSLv3 cipher=EDH-RSA-DES-CBC3-SHA bits=168 verify=NO);
	Tue, 19 Apr 2005 12:01:38 -0700
Received: from localhost (shell0.pdx.osdl.net [10.9.0.31])
	by shell0.pdx.osdl.net (8.13.1/8.11.6) with ESMTP id j3JJ1aMM025510;
	Tue, 19 Apr 2005 12:01:37 -0700
To: Chris Mason <mason@suse.com>
In-Reply-To: <200504191412.00227.mason@suse.com>
X-Spam-Status: No, hits=0 required=5 tests=
X-Spam-Checker-Version: SpamAssassin 2.63-osdl_revision__1.35__
X-MIMEDefang-Filter: osdl$Revision: 1.109 $
X-Scanned-By: MIMEDefang 2.36
Sender: git-owner@vger.kernel.org
Precedence: bulk
X-Mailing-List: git@vger.kernel.org
Status: RO



On Tue, 19 Apr 2005, Chris Mason wrote:
> 
> Very true, you can't replace quilt with git without ruining both of them.  But 
> it would be nice to take a quilt tree and turn it into a git tree for merging 
> purposes, or to make use of whatever visualization tools might exist someday.  

Fair enough. The thing is, going from quilt->git really is a pretty "big
decision", since it's the decision that says "I will now really commit all
this quilt changes forever and ever".

Which is also why I think it's actually ok to take a minute to do 100
quilt patches. This is not something you do on a whim. It's something
you'd better think about. It's turning a very fluid environment into a
unchangable, final thing.

That said, I agree that "write-tree" is expensive. It tends to be by far
the most expensive op you normally do. I'll make sure it goes faster.

> We already have a "trust me, it hasn't changed" via update-cache.

Heh. I see "update-cache" not as a "it hasn't changed", but a "it _has_ 
changed, and now I want you to reflect that fact". In other words, 
update-cache is an active statement: it says that you're ready to commit 
your changes.

In contrast, to me your "write-tree" thing in many ways is the reverse of 
that: it's saying "don't look here, there's nothing interesting there".

Which to me smells like trying to hide problems rather than being positive 
about them.

Which it is, of course. It's trying to hide the fact that writing a tree 
is not instantaenous.

> With that said, I hate the patch too.  I didn't see how to compare against the 
> old tree without reading each tree object from the old tree, and that should 
> be slower then what write-tree does now.

Reading a tree is faster, simply because you uncompress instead of
compress. So I can read a tree in 0.28 seconds, but it takes me 0.34
seconds to write one. That said, reading the trees has disk seek issues if
it's not in the cache.

What I'd actually prefer to do is to just handle tree caching the same way
we handle file caching - in the index.

Ie we could have the index file track "what subtree is this directory
associated with", and have a "update-cache --refresh-dir" thing that
updates it (and any entry update in that directory obviously removes the
dir-cache entry).

Normally we'd not bother and it would never trigger, but it would be
useful for your scripted setup it would end up caching all the tree
information in a very efficient manner. Totally transparently, apart from
the one "--refresh-dir" at the beginning. That one would be slightly
expensive (ie would do all the stuff that "write-tree" does, but it would
be done just once).

(We could also just make "write-tree" do it _totally_ transparently, but
then we're back to having write-tree both read _and_ write the index file,
which is a situation that I've been trying to avoid. It's so much easier 
to verify the correctness of an operation if it is purely "one-way").

I'll think about it. I'd love to speed up write-tree, and keeping track of 
it in the index is a nice little trick, but it's not quite high enough up 
on my worries for me to act on it right now.

But if you want to try to see how nasty it would be to add tree index
entries to the index file at "write-tree" time automatically, hey...

		Linus
-
To unsubscribe from this list: send the line "unsubscribe git" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  http://vger.kernel.org/majordomo-info.html



From news@gmane.org Tue Mar 04 03:33:20 2003
From: David Greaves <david@dgreaves.com>
Subject: Re: [PATCH] Add help details to git help command. (This time with
 Perl)
Date: Tue, 19 Apr 2005 20:04:16 +0100
Lines: 344
Message-ID: <42655630.80207@dgreaves.com>
References: <200504172242.26326.elenstev@mesatop.com> <20050418102412.GJ1461@pasky.ji.cz> <42654153.8080307@mesatop.com> <20050419175051.GK12757@pasky.ji.cz>
Mime-Version: 1.0
Content-Type: multipart/mixed;
 boundary="------------050206040606040908050407"
Cc: Steven Cole <elenstev@mesatop.com>, git@vger.kernel.org
X-From: git-owner@vger.kernel.org Tue Apr 19 21:02:19 2005
Return-path: <git-owner@vger.kernel.org>
Received: from vger.kernel.org ([12.107.209.244])
	by ciao.gmane.org with esmtp (Exim 4.43)
	id 1DNxyi-0002BX-GT
	for gcvg-git@gmane.org; Tue, 19 Apr 2005 21:01:44 +0200
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S261451AbVDSTFs (ORCPT <rfc822;gcvg-git@m.gmane.org>);
	Tue, 19 Apr 2005 15:05:48 -0400
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S261240AbVDSTFs
	(ORCPT <rfc822;git-outgoing>); Tue, 19 Apr 2005 15:05:48 -0400
Received: from s2.ukfsn.org ([217.158.120.143]:15061 "EHLO mail.ukfsn.org")
	by vger.kernel.org with ESMTP id S261451AbVDSTEW (ORCPT
	<rfc822;git@vger.kernel.org>); Tue, 19 Apr 2005 15:04:22 -0400
Received: from localhost (lucy.ukfsn.org [127.0.0.1])
	by mail.ukfsn.org (Postfix) with ESMTP
	id 96B2FE6D8A; Tue, 19 Apr 2005 20:02:40 +0100 (BST)
Received: from mail.ukfsn.org ([127.0.0.1])
 by localhost (lucy.ukfsn.org [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 26131-08; Tue, 19 Apr 2005 20:02:40 +0100 (BST)
Received: from oak.dgreaves.com (modem-3049.baboon.dialup.pol.co.uk [81.78.27.233])
	by mail.ukfsn.org (Postfix) with ESMTP
	id 68EADE6D3C; Tue, 19 Apr 2005 20:02:38 +0100 (BST)
Received: from ash.dgreaves.com ([10.0.0.90])
	by oak.dgreaves.com with esmtp (Exim 4.20)
	id 1DNy1A-0007GG-Qz; Tue, 19 Apr 2005 20:04:16 +0100
User-Agent: Debian Thunderbird 1.0 (X11/20050116)
X-Accept-Language: en-us, en
To: Petr Baudis <pasky@ucw.cz>
In-Reply-To: <20050419175051.GK12757@pasky.ji.cz>
X-Enigmail-Version: 0.90.0.0
X-Enigmail-Supports: pgp-inline, pgp-mime
Sender: git-owner@vger.kernel.org
Precedence: bulk
X-Mailing-List: git@vger.kernel.org
Status: RO

This is a multi-part message in MIME format.
--------------050206040606040908050407
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit

Petr Baudis wrote:
> Dear diary, on Tue, Apr 19, 2005 at 07:35:15PM CEST, I got a letter
> where Steven Cole <elenstev@mesatop.com> told me that...
> 

I've been working on git.pl and getting help working nicely

things to try:
git.pl help
git.pl add
git.pl add --help
git.pl add --man
git.pl help add

The main objectives:
* get a reasonable perl code base in git.pl
* provide some way to document WTF is going on :)
* keep the docs near the developer
* allow variations in verbosity
* modularise
* don't use modules outside the base perl set
* allow a gentle migration (so start by calling the .sh's)

I don't like the pod2usage calling convention but I use them for now.

I don't love the 'require gitadd.pl' but it's a gradual start...

Cogito.pm seems to be a good place for the library stuff.

git.pl
passes everything to scripts except gitadd.pl
works when called from somewhere other than the git dir
I don't feel 100% about the fixup ports

gitadd.pl


I thought I'd ask for comments before I spent too much time on this...

David

-- 

--------------050206040606040908050407
Content-Type: application/x-perl;
 name="Cogito.pm"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline;
 filename="Cogito.pm"

package Cogito;
# Copyright (c) David Greaves, 2005

use Exporter qw(import);
use Pod::Usage;

our @EXPORT=qw(error help ignore);  # subs exported by default


# Standard mechanism to raise an error.
sub error {
	print STDERR "git: ".join("\n",@_)."\n";
}

# Utility that extracts the perlpod from the caller's file
sub help
  {
    my (undef,$srcfilename) = caller;
    pod2usage(@_, -input=>$srcfilename);
  }

sub ignore
  {
    return 0;
  }
1;

--------------050206040606040908050407
Content-Type: application/x-perl;
 name="gitadd.pl"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline;
 filename="gitadd.pl"

#!/usr/bin/perl -w
#
# Add new file to a GIT repository.
# Copyright (c) Petr Baudis, 2005
# Copyright (c) David Greaves, 2005
#

# FIXME: Those files are omitted from show-diff output!

use IO::File;   # leads to less perlish syntax and is standard in perl dists
use Pod::Usage;
use Cogito;

my $processed_stdin;
my $queue;
my $count = 0;
my $recurse;

sub add
# takes a list of filenames, - is opened and treated as a standard list
  {
    help(-verbose=>0, -exitval=>1) unless $_[0]; # exit if no args
    help(-verbose=>1, -exitval=>0) if $_[0] eq "--help";
    help(-verbose=>2, -exitval=>0) if $_[0] eq "--man";

    if ($_[0] eq '-r') { # Recurse?
      $recurse = 1;
      shift;
    }

    $queue = IO::File->new(">> $repo/add-queue") || die "Couldn't open add-queue $!";
    _add_files(@_);
    $queue->close;
    error("Added $count files for commital") if $verbose;
  }

sub _add_files
  {
    foreach $filename (@_) {
      if ($filename eq "-" && !$processed_stdin) {
	$processed_stdin=1; # avoid trying to process it twice if someone does "git add foo - bar -"
	while (<STDIN>) {
	  chomp;
	  _add_files($_);
	}
      } elsif (ignore($filename)) {
	next;
      } elsif (-d $filename && $recurse) {
	# FIX recurse into directory...
	# _add_files(glob "$filename/*"); # git ignores .files FIX: Check this?
      } else {
	error("adding non-existent file $filename") unless -f $filename;
	$queue->print($filename);
	$count++;
      }
    }
  }

1;
__END__

=head1 git add

add - Add new file or files to a GIT repository.

=head1 SYNOPSIS

add - Add new file or files to a GIT repository.

Usage: git add [-r] (-|FILE)...";

=head1 OPTIONS

	[-r]  recurse on any directories listed in FILE...
              not implemented yet but I want to see the help :)

=head1 DESCRIPTION

Takes a list of file names at the command line, and schedules them for
addition to the GIT repository at the next commit.


=cut

--------------050206040606040908050407
Content-Type: application/x-perl;
 name="git.pl"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline;
 filename="git.pl"

#!/usr/bin/perl -w
# The GIT scripted toolkit - in perl
# Copyright (c) Petr Baudis, 2005
# Copyright (c) David Greaves, 2005
#
# This is the central command for the GIT toolkit, providing a humanly
# usable SCM-like interface to GIT.
#
# This command mostly only multiplexes to the individual script based
# on the first argument.

# generalised usage:
# git [options] command [command options] [command args]

use Pod::Usage;        # Lets see if we can have a consistent form of
                       # documenting what we do that can also be
                       # extracted automatically
use English;           # Reduce obfuscation (nb performance hit on
                       # regexps may be an issue one day)

use File::Basename;

use lib ("".dirname($0));  # For now add the git executable dir to lib

use Cogito;


# This quietly tries to handle any changes to the repository format
perform_fixups();

# Set up standard initialisation variables
our $repo = ".git";
our $verbose = 1 ; # set using prefs??

execute_commands();

exit;

sub execute_commands
  {
    # FIX: Process any intermediate args (eg --verbose?)
    my $cmd = shift @ARGV;

    help(-msg=>"git: missing command", -exitval=>1, -verbose=>1)
      if !$cmd;

  COMMAND: for ($cmd) {
      /^add$/ && do {
	require "gitadd.pl";
	add(@ARGV);
	last COMMAND;
      };

      /^(addremote|apply|cancel|commit|diff|export|fork|
         init|log|ls|lsobj|lsremote|merge|pull|status|
         tag|track|version)$/x && do {
	system("git$1.sh ".join(' ',@ARGV));
	last COMMAND;
      };

      /^help$/ && do {
	$cmd = shift @ARGV;
	if ($cmd) { # is this git help <command>
	  error("help $cmd - not supported until all commands take --help");
	  exit(1);
	  unshift @ARGV,"--help";
	  unshift @ARGV,$cmd;
	  execute_commands(@ARGV);
	} else {
	  pod2usage(-verbose=>1, -exitval=>0);
	}
	last COMMAND;
      };

      pod2usage(-msg=>"unknown command: $cmd", -exitval=>1, -verbose=>2);
    }
  }


sub perform_fixups
  {
    ### XXX: Compatibility hack.
    # Introduced at 2005-04-12, to be removed few days later.
    if (-d '.dircache'&& ! -e '.git') {
      system("mv .dircache .git");
    }

    # Introduced at 2005-04-13:
    if (-d '.git' && ! -d '.git/heads') {
      system("mkdir .git/heads");
      for $h (glob '.git/HEAD.*') {
	if ( $h ne "local") {
	  my (undef, undef, $i) = split("\.",$h);
	  system ("mv $h .git/heads/$i");
	}
      }
    }
    # Introduced at 2005-04-16:
    if ( -d '.git' &&  ! -e '.git/heads/master') {
      system("mv .git/HEAD .git/heads/master");
      system("ln -s heads/master .git/HEAD");
    }
  }

__END__

=head1 git

The GIT scripted toolkit  $(gitversion.sh)

=head1 SYNOPSIS

Usage: git COMMAND [ARG]...

=head1 OPTIONS

Available commands:

	add		FILE...
	addremote	RNAME RSYNC_URL
	apply				< patch on stdin
	cancel
	ci, commit	[FILE]...	< log message on stdin
	diff		[-p] [-r FROM_ID[:TO_ID]] [FILE]...
	export		DESTDIR [TREE_ID]
	fork		BNAME BRANCH_DIR [COMMIT_ID]
	help
	init		RSYNC_URL
	log
	ls		[TREE_ID]
	lsobj		[OBJTYPE]
	lsremote
	merge		[-c] [-b BASE_ID] FROM_ID
	pull		[RNAME]
	rm		FILE...
	seek		[COMMIT_ID]
	status
	tag		TNAME [COMMIT_ID]
	track		[RNAME]
	version


Note that these expressions can be used interchangably as "ID"s:
	empty string (current HEAD)
	remote name (as registered with git addremote)
	tag name (as registered with git tag)
	shortcut hash (shorted unambiguous hash lead)
	commit object hash (as returned by commit-id)
	tree object hash (accepted only by some commands)

=head1 DESCRIPTION

Takes a list of file names at the command line, and schedules them for
addition to the GIT repository at the next commit.


=cut

--------------050206040606040908050407--
-
To unsubscribe from this list: send the line "unsubscribe git" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  http://vger.kernel.org/majordomo-info.html



From news@gmane.org Tue Mar 04 03:33:20 2003
From: Greg KH <greg@kroah.com>
Subject: Re: [script] ge: export commits as patches
Date: Tue, 19 Apr 2005 12:11:29 -0700
Lines: 26
Message-ID: <20050419191128.GA4871@kroah.com>
References: <20050419134843.GA19146@elte.hu> <20050419170320.GG12757@pasky.ji.cz>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Cc: Ingo Molnar <mingo@elte.hu>, git@vger.kernel.org
X-From: git-owner@vger.kernel.org Tue Apr 19 21:09:11 2005
Return-path: <git-owner@vger.kernel.org>
Received: from vger.kernel.org ([12.107.209.244])
	by ciao.gmane.org with esmtp (Exim 4.43)
	id 1DNy4q-0003AO-OJ
	for gcvg-git@gmane.org; Tue, 19 Apr 2005 21:08:05 +0200
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S261571AbVDSTMI (ORCPT <rfc822;gcvg-git@m.gmane.org>);
	Tue, 19 Apr 2005 15:12:08 -0400
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S261596AbVDSTMI
	(ORCPT <rfc822;git-outgoing>); Tue, 19 Apr 2005 15:12:08 -0400
Received: from mail.kroah.org ([69.55.234.183]:61419 "EHLO perch.kroah.org")
	by vger.kernel.org with ESMTP id S261571AbVDSTL4 (ORCPT
	<rfc822;git@vger.kernel.org>); Tue, 19 Apr 2005 15:11:56 -0400
Received: from [192.168.0.10] (c-24-22-118-199.hsd1.or.comcast.net [24.22.118.199])
	(authenticated)
	by perch.kroah.org (8.11.6/8.11.6) with ESMTP id j3JJBoi07755;
	Tue, 19 Apr 2005 12:11:50 -0700
Received: from greg by echidna.kroah.org with local (masqmail 0.2.19)
 id 1DNy89-1TU-00; Tue, 19 Apr 2005 12:11:29 -0700
To: Petr Baudis <pasky@ucw.cz>
Content-Disposition: inline
In-Reply-To: <20050419170320.GG12757@pasky.ji.cz>
User-Agent: Mutt/1.5.8i
Sender: git-owner@vger.kernel.org
Precedence: bulk
X-Mailing-List: git@vger.kernel.org
Status: RO

On Tue, Apr 19, 2005 at 07:03:20PM +0200, Petr Baudis wrote:
> Dear diary, on Tue, Apr 19, 2005 at 03:48:43PM CEST, I got a letter
> where Ingo Molnar <mingo@elte.hu> told me that...
> > is there any 'export commit as patch' support in git-pasky? I didnt find 
> > any such command (maybe it got added meanwhile), so i'm using the 'ge' 
> > hack below.
> > 
> > e.g. i typically look at commits via 'git log', and then when i see 
> > something interesting, i look at the commit via the 'ge' script. E.g.  
> > "ge 834f6209b22af2941a8640f1e32b0f123c833061" done in the kernel tree 
> > will output a particular commit's header and the patch.
> 
> Nice idea. I will add it, probably as 'git patch'.

Ah, thanks for doing this.  'git patch' works great (but you might want
to mention in the 'help' that you can give the commit id for the patch,
if you don't want to see the HEAD patch.)

thanks,

greg k-h
-
To unsubscribe from this list: send the line "unsubscribe git" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  http://vger.kernel.org/majordomo-info.html



From news@gmane.org Tue Mar 04 03:33:20 2003
From: Linus Torvalds <torvalds@osdl.org>
Subject: Re: [GIT PATCH] I2C and W1 bugfixes for 2.6.12-rc2
Date: Tue, 19 Apr 2005 12:40:44 -0700 (PDT)
Lines: 47
Message-ID: <Pine.LNX.4.58.0504191204480.19286@ppc970.osdl.org>
References: <20050419043938.GA23724@kroah.com>
	<20050419185807.GA1191@kroah.com>
Mime-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
Cc: Greg KH <gregkh@suse.de>, Git Mailing List <git@vger.kernel.org>,
        linux-kernel@vger.kernel.org, sensors@Stimpy.netroedge.com
X-From: lm78@Stimpy.netroedge.com Tue Apr 19 21:36:54 2005
Return-path: <lm78@Stimpy.netroedge.com>
Received: from stimpy.netroedge.com ([206.228.191.3])
	by ciao.gmane.org with esmtp (Exim 4.43)
	id 1DNyVn-0007Io-Gk
	for gls-sensors@gmane.org; Tue, 19 Apr 2005 21:35:56 +0200
Received: from Stimpy.netroedge.com (IDENT:lm78@localhost [127.0.0.1])
	by Stimpy.netroedge.com (8.12.10/8.12.10) with ESMTP id j3JJf6pv007172;
	Tue, 19 Apr 2005 12:41:06 -0700
Received: (from lm78@localhost)
	by Stimpy.netroedge.com (8.12.10/8.12.8/Submit) id j3JJf3MZ007165;
	Tue, 19 Apr 2005 12:41:03 -0700
Received: from smtp.osdl.org (fire.osdl.org [65.172.181.4])
	by Stimpy.netroedge.com (8.12.10/8.12.10) with ESMTP id j3JJf0pv007146
	for <sensors@stimpy.netroedge.com>; Tue, 19 Apr 2005 12:41:01 -0700
Received: from shell0.pdx.osdl.net (fw.osdl.org [65.172.181.6])
	by smtp.osdl.org (8.12.8/8.12.8) with ESMTP id j3JJcls4009314
	(version=TLSv1/SSLv3 cipher=EDH-RSA-DES-CBC3-SHA bits=168 verify=NO);
	Tue, 19 Apr 2005 12:38:48 -0700
Received: from localhost (shell0.pdx.osdl.net [10.9.0.31])
	by shell0.pdx.osdl.net (8.13.1/8.11.6) with ESMTP id j3JJcjvm027220;
	Tue, 19 Apr 2005 12:38:46 -0700
To: Greg KH <greg@kroah.com>
In-Reply-To: <20050419185807.GA1191@kroah.com>
X-Spam-Status: No, hits=0 required=5 tests=
X-Spam-Checker-Version: SpamAssassin 2.63-osdl_revision__1.35__
X-MIMEDefang-Filter: osdl$Revision: 1.109 $
X-Scanned-By: MIMEDefang 2.36
X-sensors-spam: ham; 0.01
Status: RO



On Tue, 19 Apr 2005, Greg KH wrote:
> 
> Nice, it looks like the merge of this tree, and my usb tree worked just
> fine.

Yup, it all seems to work out.

> So, what does this now mean?  Is your kernel.org git tree now going to
> be the "real" kernel tree that you will be working off of now?  Should
> we crank up the nightly snapshots and emails to the -commits list?

I'm not quite ready to consider it "real", but I'm getting there.

I'm still working out some performance issues with merges (the actual
"merge" operation itself is very fast, but I've been trying to make the
subsequent "update the working directory tree to the right thing" be much
better).

> Can I rely on the fact that these patches are now in your tree and I can
> forget about them? :)
> 
> Just wondering how comfortable you feel with your git tree so far.

Hold off for one more day. I'm very comfortable with how well git has 
worked out so far, and yes, mentally I consider this "the tree", but the 
fact is, git isn't exactly easy on "normal users".

I think my merge stuff and Pasky's scripts are getting there, but I want
to make sure that we have a version of Pasky's scripts that use the new
"read-tree -m" optimizations to make tracking a tree faster, and I'd like
to have them _tested_ a bit first.

In other words, I want it to be at the point where people can do

	git pull <repo-address>

and it will "just work", at least for people who don't have any local
changes in their tree. None of this "check out all the files again" crap.

But how about a plan that we go "live" tomorrow - assuming nobody finds
any problems before that, of course.

			Linus




From news@gmane.org Tue Mar 04 03:33:20 2003
From: Petr Baudis <pasky@ucw.cz>
Subject: Re: [script] ge: export commits as patches
Date: Tue, 19 Apr 2005 21:41:08 +0200
Lines: 20
Message-ID: <20050419194108.GN12757@pasky.ji.cz>
References: <20050419134843.GA19146@elte.hu> <20050419170320.GG12757@pasky.ji.cz> <20050419185607.GA26756@elte.hu>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Cc: git@vger.kernel.org
X-From: git-owner@vger.kernel.org Tue Apr 19 21:38:36 2005
Return-path: <git-owner@vger.kernel.org>
Received: from vger.kernel.org ([12.107.209.244])
	by ciao.gmane.org with esmtp (Exim 4.43)
	id 1DNyXS-0007Z0-VI
	for gcvg-git@gmane.org; Tue, 19 Apr 2005 21:37:39 +0200
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S261253AbVDSTl1 (ORCPT <rfc822;gcvg-git@m.gmane.org>);
	Tue, 19 Apr 2005 15:41:27 -0400
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S261631AbVDSTl1
	(ORCPT <rfc822;git-outgoing>); Tue, 19 Apr 2005 15:41:27 -0400
Received: from w241.dkm.cz ([62.24.88.241]:9413 "HELO machine.sinus.cz")
	by vger.kernel.org with SMTP id S261253AbVDSTlR (ORCPT
	<rfc822;git@vger.kernel.org>); Tue, 19 Apr 2005 15:41:17 -0400
Received: (qmail 12165 invoked by uid 2001); 19 Apr 2005 19:41:08 -0000
To: Ingo Molnar <mingo@elte.hu>
Content-Disposition: inline
In-Reply-To: <20050419185607.GA26756@elte.hu>
User-Agent: Mutt/1.4i
X-message-flag: Outlook : A program to spread viri, but it can do mail too.
Sender: git-owner@vger.kernel.org
Precedence: bulk
X-Mailing-List: git@vger.kernel.org
Status: RO

Dear diary, on Tue, Apr 19, 2005 at 08:56:07PM CEST, I got a letter
where Ingo Molnar <mingo@elte.hu> told me that...
> and please fix gitXnormid.sh to simply echo nothing and return with a -1 
> exit value when a nonsensical ID is passed to it. Right now the output 
> is quite ugly if you do 'ge blah'.

That's a feature; you can do || exit 1. Put its stderr to /dev/null if
you want your own error reporting.

BTW, I still think my gitpatch.sh is nicer. ;-)

-- 
				Petr "Pasky" Baudis
Stuff: http://pasky.or.cz/
C++: an octopus made by nailing extra legs onto a dog. -- Steve Taylor
-
To unsubscribe from this list: send the line "unsubscribe git" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  http://vger.kernel.org/majordomo-info.html



From news@gmane.org Tue Mar 04 03:33:20 2003
From: Pavel Roskin <proskin@roinet.com>
Subject: [PATCH] Parametrize installation directory
Date: Tue, 19 Apr 2005 15:43:24 -0400
Organization: Rajant Corporation
Lines: 43
Message-ID: <1113939804.3684.3.camel@dv>
Mime-Version: 1.0
Content-Type: text/plain
Content-Transfer-Encoding: 7bit
X-From: git-owner@vger.kernel.org Tue Apr 19 21:40:28 2005
Return-path: <git-owner@vger.kernel.org>
Received: from vger.kernel.org ([12.107.209.244])
	by ciao.gmane.org with esmtp (Exim 4.43)
	id 1DNyZD-0007pu-18
	for gcvg-git@gmane.org; Tue, 19 Apr 2005 21:39:27 +0200
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S261637AbVDSTne (ORCPT <rfc822;gcvg-git@m.gmane.org>);
	Tue, 19 Apr 2005 15:43:34 -0400
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S261639AbVDSTne
	(ORCPT <rfc822;git-outgoing>); Tue, 19 Apr 2005 15:43:34 -0400
Received: from h-64-105-159-118.phlapafg.covad.net ([64.105.159.118]:45192
	"HELO roinet.com") by vger.kernel.org with SMTP id S261637AbVDSTn2
	(ORCPT <rfc822;git@vger.kernel.org>);
	Tue, 19 Apr 2005 15:43:28 -0400
Received: (qmail 3817 invoked from network); 19 Apr 2005 19:43:25 -0000
Received: from corporate.roinet.com (HELO mail.roinet.com) (192.168.1.2)
  by roinet.com with SMTP; 19 Apr 2005 19:43:25 -0000
Received: by mail.roinet.com (Postfix, from userid 65534)
	id B447945DF1C; Tue, 19 Apr 2005 15:43:25 -0400 (EDT)
Received: from dv (unknown [192.168.1.1])
	(using SSLv3 with cipher RC4-MD5 (128/128 bits))
	(Client did not present a certificate)
	by mail.roinet.com (Postfix) with ESMTP id 427B345DF08
	for <git@vger.kernel.org>; Tue, 19 Apr 2005 15:43:25 -0400 (EDT)
To: git <git@vger.kernel.org>
X-Mailer: Evolution 2.2.1.1 
X-Spam-Checker-Version: SpamAssassin 2.64 (2004-01-11) on mail.roinet.com
X-Spam-Level: 
X-Spam-Status: No, hits=-4.8 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=2.64
Sender: git-owner@vger.kernel.org
Precedence: bulk
X-Mailing-List: git@vger.kernel.org
Status: RO

Hello!

It shouldn't be necessary to patch Makefile to specify where scripts
should be installed.  This patch introduces a variable bindir for that
purpose.  The name of the variable was chosen for compatibility with
projects using Automake.

For example, to install scripts to /usr/local/bin use:
make install bindir=usr/local/bin

Signed-off-by: Pavel Roskin <proski@gnu.org>

--- a/Makefile
+++ b/Makefile
@@ -12,6 +12,7 @@ CFLAGS=-g -O3 -Wall
 CC=gcc
 AR=ar
 
+bindir = $(HOME)/bin/
 
 PROG=   update-cache show-diff init-db write-tree read-tree commit-tree \
 	cat-file fsck-cache checkout-cache diff-tree rev-tree show-files \
@@ -54,7 +55,7 @@ gitversion.sh: $(VERSION)
 	@chmod +x $@
 
 install: $(PROG) $(GEN_SCRIPT)
-	install $(PROG) $(SCRIPT) $(GEN_SCRIPT) $(HOME)/bin/
+	install $(PROG) $(SCRIPT) $(GEN_SCRIPT) $(bindir)
 
 clean:
 	rm -f *.o $(PROG) $(GEN_SCRIPT) $(LIB_FILE)


-- 
Regards,
Pavel Roskin


-
To unsubscribe from this list: send the line "unsubscribe git" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  http://vger.kernel.org/majordomo-info.html



From news@gmane.org Tue Mar 04 03:33:20 2003
From: Greg KH <greg@kroah.com>
Subject: Re: [GIT PATCH] I2C and W1 bugfixes for 2.6.12-rc2
Date: Tue, 19 Apr 2005 12:47:30 -0700
Lines: 65
Message-ID: <20050419194728.GA24367@kroah.com>
References: <20050419043938.GA23724@kroah.com>
	<20050419185807.GA1191@kroah.com>
	<Pine.LNX.4.58.0504191204480.19286@ppc970.osdl.org>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Cc: Git Mailing List <git@vger.kernel.org>, linux-kernel@vger.kernel.org,
        sensors@Stimpy.netroedge.com
X-From: lm78@Stimpy.netroedge.com Tue Apr 19 21:47:41 2005
Return-path: <lm78@Stimpy.netroedge.com>
Received: from stimpy.netroedge.com ([206.228.191.3])
	by ciao.gmane.org with esmtp (Exim 4.43)
	id 1DNyg9-0000Po-H5
	for gls-sensors@gmane.org; Tue, 19 Apr 2005 21:46:38 +0200
Received: from Stimpy.netroedge.com (IDENT:lm78@localhost [127.0.0.1])
	by Stimpy.netroedge.com (8.12.10/8.12.10) with ESMTP id j3JJpRpv008570;
	Tue, 19 Apr 2005 12:51:27 -0700
Received: (from lm78@localhost)
	by Stimpy.netroedge.com (8.12.10/8.12.8/Submit) id j3JJpHos008551;
	Tue, 19 Apr 2005 12:51:17 -0700
Received: from perch.kroah.org (mail.kroah.org [69.55.234.183])
	by Stimpy.netroedge.com (8.12.10/8.12.10) with ESMTP id j3JJpDpv008538
	for <sensors@stimpy.netroedge.com>; Tue, 19 Apr 2005 12:51:16 -0700
Received: from [192.168.0.10] (c-24-22-118-199.hsd1.or.comcast.net
	[24.22.118.199])	(authenticated)
	by perch.kroah.org (8.11.6/8.11.6) with ESMTP id j3JJnAi10405;
	Tue, 19 Apr 2005 12:49:10 -0700
Received: from greg by echidna.kroah.org with local (masqmail 0.2.19)
 id 1DNyh1-6Rq-00; Tue, 19 Apr 2005 12:47:31 -0700
To: Linus Torvalds <torvalds@osdl.org>
Content-Disposition: inline
In-Reply-To: <Pine.LNX.4.58.0504191204480.19286@ppc970.osdl.org>
User-Agent: Mutt/1.5.8i
X-sensors-spam: ham; 0.00
Status: RO

On Tue, Apr 19, 2005 at 12:40:44PM -0700, Linus Torvalds wrote:
> I'm still working out some performance issues with merges (the actual
> "merge" operation itself is very fast, but I've been trying to make the
> subsequent "update the working directory tree to the right thing" be much
> better).

Ok, if you want some practice with "real" merges, feel free to merge from
the following two trees whenever you are ready:
	kernel.org/pub/scm/linux/kernel/git/gregkh/aoe-2.6.git/
for 11 aoe bugfix patches, and:
	kernel.org/pub/scm/linux/kernel/git/gregkh/driver-2.6.git/
for 13 driver core, sysfs, and debugfs fixes.

The diffstats are:

aoe:
 Documentation/aoe/mkdevs.sh       |    1 
 Documentation/aoe/mkshelf.sh      |    1 
 Documentation/aoe/todo.txt        |   14 ++++
 Documentation/aoe/udev-install.sh |    6 +-
 drivers/block/aoe/aoe.h           |   23 +++++--
 drivers/block/aoe/aoeblk.c        |    5 +
 drivers/block/aoe/aoecmd.c        |  110 ++++++++++++++++++++++----------------
 drivers/block/aoe/aoedev.c        |    8 +-
 drivers/block/aoe/aoenet.c        |    8 +-
 9 files changed, 111 insertions(+), 65 deletions(-)

driver:
 Documentation/kref.txt        |  221 +++++++++++++++++++++++++++++++++++++++++-
 drivers/base/class.c          |    2 
 drivers/base/core.c           |    3 
 drivers/base/firmware_class.c |    3 
 drivers/base/platform.c       |    1 
 drivers/usb/host/hc_crisv10.c |    1 
 fs/partitions/check.c         |    2 
 fs/sysfs/file.c               |   35 ++++++
 include/linux/debugfs.h       |   14 +-
 include/linux/sysfs.h         |    7 +
 lib/kobject.c                 |    7 -
 net/bridge/br_sysfs_if.c      |    2 
 scripts/ver_linux             |    2 
 13 files changed, 290 insertions(+), 10 deletions(-)

No rush, but they should be good test for your merge speeds, as they are
based off of an older HEAD than your current one :)

> In other words, I want it to be at the point where people can do
> 
> 	git pull <repo-address>
> 
> and it will "just work", at least for people who don't have any local
> changes in their tree. None of this "check out all the files again" crap.

That would be very nice to have.

> But how about a plan that we go "live" tomorrow - assuming nobody finds
> any problems before that, of course.

That's fine with me.

thanks,

greg k-h




From news@gmane.org Tue Mar 04 03:33:20 2003
From: Linus Torvalds <torvalds@osdl.org>
Subject: Re: [GIT PATCH] I2C and W1 bugfixes for 2.6.12-rc2
Date: Tue, 19 Apr 2005 13:20:47 -0700 (PDT)
Lines: 28
Message-ID: <Pine.LNX.4.58.0504191316180.19286@ppc970.osdl.org>
References: <20050419043938.GA23724@kroah.com> <20050419185807.GA1191@kroah.com>
 <Pine.LNX.4.58.0504191204480.19286@ppc970.osdl.org> <20050419194728.GA24367@kroah.com>
Mime-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
Cc: Git Mailing List <git@vger.kernel.org>,
	linux-kernel@vger.kernel.org, sensors@stimpy.netroedge.com
X-From: git-owner@vger.kernel.org Tue Apr 19 22:16:14 2005
Return-path: <git-owner@vger.kernel.org>
Received: from vger.kernel.org ([12.107.209.244])
	by ciao.gmane.org with esmtp (Exim 4.43)
	id 1DNz7y-00056E-J7
	for gcvg-git@gmane.org; Tue, 19 Apr 2005 22:15:22 +0200
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S261656AbVDSUTO (ORCPT <rfc822;gcvg-git@m.gmane.org>);
	Tue, 19 Apr 2005 16:19:14 -0400
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S261655AbVDSUTO
	(ORCPT <rfc822;git-outgoing>); Tue, 19 Apr 2005 16:19:14 -0400
Received: from fire.osdl.org ([65.172.181.4]:28562 "EHLO smtp.osdl.org")
	by vger.kernel.org with ESMTP id S261190AbVDSUTI (ORCPT
	<rfc822;git@vger.kernel.org>); Tue, 19 Apr 2005 16:19:08 -0400
Received: from shell0.pdx.osdl.net (fw.osdl.org [65.172.181.6])
	by smtp.osdl.org (8.12.8/8.12.8) with ESMTP id j3JKIps4012850
	(version=TLSv1/SSLv3 cipher=EDH-RSA-DES-CBC3-SHA bits=168 verify=NO);
	Tue, 19 Apr 2005 13:18:53 -0700
Received: from localhost (shell0.pdx.osdl.net [10.9.0.31])
	by shell0.pdx.osdl.net (8.13.1/8.11.6) with ESMTP id j3JKInic029302;
	Tue, 19 Apr 2005 13:18:50 -0700
To: Greg KH <greg@kroah.com>
In-Reply-To: <20050419194728.GA24367@kroah.com>
X-Spam-Status: No, hits=0 required=5 tests=
X-Spam-Checker-Version: SpamAssassin 2.63-osdl_revision__1.35__
X-MIMEDefang-Filter: osdl$Revision: 1.109 $
X-Scanned-By: MIMEDefang 2.36
Sender: git-owner@vger.kernel.org
Precedence: bulk
X-Mailing-List: git@vger.kernel.org
Status: RO



On Tue, 19 Apr 2005, Greg KH wrote:
> 
> Ok, if you want some practice with "real" merges, feel free to merge from
> the following two trees whenever you are ready:
> 	kernel.org/pub/scm/linux/kernel/git/gregkh/aoe-2.6.git/
> for 11 aoe bugfix patches, and:
> 	kernel.org/pub/scm/linux/kernel/git/gregkh/driver-2.6.git/
> for 13 driver core, sysfs, and debugfs fixes.

Done, pushed out. Can you verify that the end result looks sane to you? I 
just cheched that the diffstat looks similar (mine claims just 108 lines 
changed in aoecmd.c - possibly due to different diff formats).

And yes, my new merge thing seems to have kept the index-cache much better 
up-to-date, allowing an optimized checkout-cache -f -a to work and only 
get the new files.

Pasky? Can you check my latest git stuff, notably read-tree.c and the 
changes to git-pull-script?

		Linus
-
To unsubscribe from this list: send the line "unsubscribe git" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  http://vger.kernel.org/majordomo-info.html



From news@gmane.org Tue Mar 04 03:33:20 2003
From: Pavel Roskin <proski@gnu.org>
Subject: [PATCH] Better option parsing for gitdiff.sh
Date: Tue, 19 Apr 2005 16:19:19 -0400
Lines: 104
Message-ID: <1113941959.3684.9.camel@dv>
Mime-Version: 1.0
Content-Type: text/plain
Content-Transfer-Encoding: 7bit
X-From: git-owner@vger.kernel.org Tue Apr 19 22:16:50 2005
Return-path: <git-owner@vger.kernel.org>
Received: from vger.kernel.org ([12.107.209.244])
	by ciao.gmane.org with esmtp (Exim 4.43)
	id 1DNz8J-0005A8-08
	for gcvg-git@gmane.org; Tue, 19 Apr 2005 22:15:43 +0200
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S261257AbVDSUTt (ORCPT <rfc822;gcvg-git@m.gmane.org>);
	Tue, 19 Apr 2005 16:19:49 -0400
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S261648AbVDSUTt
	(ORCPT <rfc822;git-outgoing>); Tue, 19 Apr 2005 16:19:49 -0400
Received: from h-64-105-159-118.phlapafg.covad.net ([64.105.159.118]:10197
	"EHLO localhost.localdomain") by vger.kernel.org with ESMTP
	id S261257AbVDSUTZ (ORCPT <rfc822;git@vger.kernel.org>);
	Tue, 19 Apr 2005 16:19:25 -0400
Received: by localhost.localdomain (Postfix, from userid 500)
	id B7281EFF19; Tue, 19 Apr 2005 16:19:19 -0400 (EDT)
To: git <git@vger.kernel.org>
X-Mailer: Evolution 2.2.1.1 
Sender: git-owner@vger.kernel.org
Precedence: bulk
X-Mailing-List: git@vger.kernel.org
Status: RO

Hello!

This patch improves option handling for gitdiff.sh.  Now "-p" doesn't
need to precede "-r", although all options still have to be placed
before the file names.  Also, the patch introduces a minimal usage info
for the script.

The patch is against current git-pasky.

Signed-off-by: Pavel Roskin <proski@gnu.org>

--- a/gitdiff.sh
+++ b/gitdiff.sh
@@ -27,6 +27,13 @@ die () {
 	exit 1
 }
 
+usage () {
+	echo "Usage:" >&2
+	echo "  gitdiff.sh -r rev1:rev2 [FILES...]" >&2
+	echo "  gitdiff.sh -r rev1 -r rev2 [FILES...]" >&2
+	exit 1
+}
+
 diffqfile () {
 	dir=$1; shift
 	file=$1; shift
@@ -59,26 +66,44 @@ diffqueue () {
 	return $ret
 }
 
-
-# FIXME: The commandline parsing is awful.
-
-if [ "$1" = "-p" ]; then
-	shift
-	parent=1
-fi
-
-if [ "$1" = "-r" ]; then
-	shift
-	id1=$(echo "$1": | cut -d : -f 1)
-	[ "$id1" != "$1" ] && id2=$(echo "$1": | cut -d : -f 2)
-	shift
-fi
-
-if [ "$1" = "-r" ]; then
-	shift
-	id2="$1"
-	shift
-fi
+# Parsing the command line
+id1_set=
+id2_set=
+while true; do
+	case $1 in
+	-p)
+		parent=1
+		shift
+		;;
+	-r)
+		if test "$id2_set"; then
+			echo "Too many revision numbers" 2>&1
+			usage
+		elif test "$id1_set"; then
+			shift
+			id2="$1"
+			id2_set=1
+			shift
+		else
+			shift
+			id1=$(echo "$1": | cut -d : -f 1)
+			id1_set=1
+			if test "$id1" != "$1"; then
+				id2=$(echo "$1": | cut -d : -f 2)
+				id2_set=1
+			fi
+			shift
+		fi
+		;;
+	-*)
+		echo "Unknown option $1" 2>&1
+		usage
+		;;
+	*)
+		break
+		;;
+	esac
+done
 
 if [ "$parent" ]; then
 	id2="$id1"



-- 
Regards,
Pavel Roskin

-
To unsubscribe from this list: send the line "unsubscribe git" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  http://vger.kernel.org/majordomo-info.html



From news@gmane.org Tue Mar 04 03:33:20 2003
From: Zach Welch <zw@superlucidity.net>
Subject: [PATCH] init-db.c: fix stupid typo
Date: Tue, 19 Apr 2005 13:31:00 -0700
Lines: 25
Message-ID: <mailbox-25052-1113942660-25966@spoon>
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7BIT
X-From: git-owner@vger.kernel.org Tue Apr 19 22:27:22 2005
Return-path: <git-owner@vger.kernel.org>
Received: from vger.kernel.org ([12.107.209.244])
	by ciao.gmane.org with esmtp (Exim 4.43)
	id 1DNzJ7-0006h0-8p
	for gcvg-git@gmane.org; Tue, 19 Apr 2005 22:26:53 +0200
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S261655AbVDSUbC (ORCPT <rfc822;gcvg-git@m.gmane.org>);
	Tue, 19 Apr 2005 16:31:02 -0400
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S261657AbVDSUbC
	(ORCPT <rfc822;git-outgoing>); Tue, 19 Apr 2005 16:31:02 -0400
Received: from guft.superlucidity.net ([63.224.205.130]:54414 "EHLO
	mail.guft.org") by vger.kernel.org with ESMTP id S261655AbVDSUbB
	(ORCPT <rfc822;git@vger.kernel.org>);
	Tue, 19 Apr 2005 16:31:01 -0400
Received: (qmail 25055 invoked by uid 5006); 19 Apr 2005 13:31:00 -0700
To: git@vger.kernel.org
In-Reply-To: mailbox-23311-1113901779-730821@spoon
Lines: 20
Sender: git-owner@vger.kernel.org
Precedence: bulk
X-Mailing-List: git@vger.kernel.org
Status: RO

Fix a stupid typo from the last mkdir refactorng patch.

 init-db.c |    2 +-
 1 files changed, 1 insertion(+), 1 deletion(-)

Signed-Off-By: Zach Welch <zw@superlucidity.net>


--- a/init-db.c	2005-04-19 13:06:11.000000000 -0700
+++ a/init-db.c	2005-04-19 13:06:16.000000000 -0700
@@ -11,7 +11,7 @@
  * be the judge.  The default case is to have a DB per managed directory.
  */
 
-static void create_dir(char *path) 
+static void create_dir(char *dir) 
 {
 	if (mkdir(dir, 0755) < 0) {
 		if (errno != EEXIST) {
There are 0 patches in this series:
-
To unsubscribe from this list: send the line "unsubscribe git" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  http://vger.kernel.org/majordomo-info.html



From news@gmane.org Tue Mar 04 03:33:20 2003
From: Steven Cole <elenstev@mesatop.com>
Subject: Re: [PATCH] Add help details to git help command. (This time with
 Perl)
Date: Tue, 19 Apr 2005 14:34:51 -0600
Lines: 65
Message-ID: <42656B6B.3080209@mesatop.com>
References: <200504172242.26326.elenstev@mesatop.com> <20050418102412.GJ1461@pasky.ji.cz> <42654153.8080307@mesatop.com> <20050419175051.GK12757@pasky.ji.cz> <42655630.80207@dgreaves.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Cc: Petr Baudis <pasky@ucw.cz>, git@vger.kernel.org
X-From: git-owner@vger.kernel.org Tue Apr 19 22:33:17 2005
Return-path: <git-owner@vger.kernel.org>
Received: from vger.kernel.org ([12.107.209.244])
	by ciao.gmane.org with esmtp (Exim 4.43)
	id 1DNzND-0007GD-FO
	for gcvg-git@gmane.org; Tue, 19 Apr 2005 22:31:08 +0200
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S261657AbVDSUfK (ORCPT <rfc822;gcvg-git@m.gmane.org>);
	Tue, 19 Apr 2005 16:35:10 -0400
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S261658AbVDSUfK
	(ORCPT <rfc822;git-outgoing>); Tue, 19 Apr 2005 16:35:10 -0400
Received: from mailwasher.lanl.gov ([192.65.95.54]:7077 "EHLO
	mailwasher-b.lanl.gov") by vger.kernel.org with ESMTP
	id S261657AbVDSUfA (ORCPT <rfc822;git@vger.kernel.org>);
	Tue, 19 Apr 2005 16:35:00 -0400
Received: from w-mail.lanl.gov (w-mail.lanl.gov [128.165.4.47])
	by mailwasher-b.lanl.gov (8.12.11/8.12.11/(ccn-5)) with ESMTP id j3JKYukX027171
	for <git@vger.kernel.org>; Tue, 19 Apr 2005 14:34:57 -0600
Received: from [128.165.67.197] (spc7.esa.lanl.gov [128.165.67.197])
	by w-mail.lanl.gov (8.12.11/8.12.11/(ccn-5)) with ESMTP id j3JKYpE5017942;
	Tue, 19 Apr 2005 14:34:51 -0600
User-Agent: Thunderbird 1.0 (Multics)
X-Accept-Language: en-us, en
To: David Greaves <david@dgreaves.com>
In-Reply-To: <42655630.80207@dgreaves.com>
X-PMX-Version: 4.7.0.111621
Sender: git-owner@vger.kernel.org
Precedence: bulk
X-Mailing-List: git@vger.kernel.org
Status: RO

David Greaves wrote:
> Petr Baudis wrote:
> 
>> Dear diary, on Tue, Apr 19, 2005 at 07:35:15PM CEST, I got a letter
>> where Steven Cole <elenstev@mesatop.com> told me that...
>>
> 
> I've been working on git.pl and getting help working nicely
> 
> things to try:
> git.pl help
> git.pl add
> git.pl add --help
> git.pl add --man
> git.pl help add
> 
> The main objectives:
> * get a reasonable perl code base in git.pl
> * provide some way to document WTF is going on :)
> * keep the docs near the developer
> * allow variations in verbosity
> * modularise
> * don't use modules outside the base perl set
> * allow a gentle migration (so start by calling the .sh's)
> 
> I don't like the pod2usage calling convention but I use them for now.
> 
> I don't love the 'require gitadd.pl' but it's a gradual start...
> 
> Cogito.pm seems to be a good place for the library stuff.
> 
> git.pl
> passes everything to scripts except gitadd.pl
> works when called from somewhere other than the git dir
> I don't feel 100% about the fixup ports
> 
> gitadd.pl
> 
> 
> I thought I'd ask for comments before I spent too much time on this...
> 
> David
> 

I only did my version which spits out the comments at the top of the
shell script as a quick hack.

This looks good to me. Keeping the docs near the developer is essential,
I think.  Speaking of "I think", the name "cogito" was suggested for the
SCM layer, but IIRC Linus suggested staying with just plain git. Petr
suggested tig, perhaps because it looks at git from another point of view.

If we ever do decide to name the SCM layer (the git-pasky stuff) something
with "git inside", other choices are:

agitato		Beethoven's "Moonlight Sonata" 3rd movment is "Presto agitato"
legit		Since git is GPLv2, but perhaps a little too French.
regurgitate	No comment neccessary.

Steven
-
To unsubscribe from this list: send the line "unsubscribe git" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  http://vger.kernel.org/majordomo-info.html



From news@gmane.org Tue Mar 04 03:33:20 2003
From: David Greaves <david@dgreaves.com>
Subject: Re: [PATCH] Add help details to git help command. (This time with
 Perl)
Date: Tue, 19 Apr 2005 21:45:17 +0100
Lines: 20
Message-ID: <42656DDD.2090907@dgreaves.com>
References: <200504172242.26326.elenstev@mesatop.com> <20050418102412.GJ1461@pasky.ji.cz> <42654153.8080307@mesatop.com> <20050419175051.GK12757@pasky.ji.cz> <42655630.80207@dgreaves.com> <42656B6B.3080209@mesatop.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Cc: Petr Baudis <pasky@ucw.cz>, git@vger.kernel.org
X-From: git-owner@vger.kernel.org Tue Apr 19 22:42:19 2005
Return-path: <git-owner@vger.kernel.org>
Received: from vger.kernel.org ([12.107.209.244])
	by ciao.gmane.org with esmtp (Exim 4.43)
	id 1DNzXQ-0000RJ-Aw
	for gcvg-git@gmane.org; Tue, 19 Apr 2005 22:41:40 +0200
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S261664AbVDSUpf (ORCPT <rfc822;gcvg-git@m.gmane.org>);
	Tue, 19 Apr 2005 16:45:35 -0400
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S261667AbVDSUpf
	(ORCPT <rfc822;git-outgoing>); Tue, 19 Apr 2005 16:45:35 -0400
Received: from s2.ukfsn.org ([217.158.120.143]:10376 "EHLO mail.ukfsn.org")
	by vger.kernel.org with ESMTP id S261664AbVDSUpV (ORCPT
	<rfc822;git@vger.kernel.org>); Tue, 19 Apr 2005 16:45:21 -0400
Received: from localhost (lucy.ukfsn.org [127.0.0.1])
	by mail.ukfsn.org (Postfix) with ESMTP
	id 0E9ACE6D7B; Tue, 19 Apr 2005 21:43:39 +0100 (BST)
Received: from mail.ukfsn.org ([127.0.0.1])
 by localhost (lucy.ukfsn.org [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 02744-02; Tue, 19 Apr 2005 21:43:38 +0100 (BST)
Received: from oak.dgreaves.com (modem-3130.lion.dialup.pol.co.uk [217.135.172.58])
	by mail.ukfsn.org (Postfix) with ESMTP
	id 66047E6D3C; Tue, 19 Apr 2005 21:43:38 +0100 (BST)
Received: from ash.dgreaves.com ([10.0.0.90])
	by oak.dgreaves.com with esmtp (Exim 4.20)
	id 1DNzav-0007P4-N8; Tue, 19 Apr 2005 21:45:17 +0100
User-Agent: Debian Thunderbird 1.0 (X11/20050116)
X-Accept-Language: en-us, en
To: Steven Cole <elenstev@mesatop.com>
In-Reply-To: <42656B6B.3080209@mesatop.com>
X-Enigmail-Version: 0.90.0.0
X-Enigmail-Supports: pgp-inline, pgp-mime
Sender: git-owner@vger.kernel.org
Precedence: bulk
X-Mailing-List: git@vger.kernel.org
Status: RO

Steven Cole wrote:
> Speaking of "I think", the name "cogito" was suggested for the
> SCM layer, but IIRC Linus suggested staying with just plain git. Petr
> suggested tig, perhaps because it looks at git from another point of view.
I haven't read _all_ the mails - I thought cogito was kinda selected and 
  I got the feeling that Linus wasn't exactly bothered what it was called.
Anyway, git has a rename that needs testing at some point...

> legit        Since git is GPLv2, but perhaps a little too French.
That made me smile.
Quite a few entendres in there...

It's Petr's baby - he gets to name it.

David
-
To unsubscribe from this list: send the line "unsubscribe git" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  http://vger.kernel.org/majordomo-info.html



From news@gmane.org Tue Mar 04 03:33:20 2003
From: Chris Mason <mason@suse.com>
Subject: Re: [PATCH] write-tree performance problems
Date: Tue, 19 Apr 2005 17:08:22 -0400
Lines: 43
Message-ID: <200504191708.23536.mason@suse.com>
References: <200504191250.10286.mason@suse.com> <200504191412.00227.mason@suse.com> <Pine.LNX.4.58.0504191143220.19286@ppc970.osdl.org>
Mime-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Cc: git@vger.kernel.org
X-From: git-owner@vger.kernel.org Tue Apr 19 23:05:47 2005
Return-path: <git-owner@vger.kernel.org>
Received: from vger.kernel.org ([12.107.209.244])
	by ciao.gmane.org with esmtp (Exim 4.43)
	id 1DNztV-00042s-1m
	for gcvg-git@gmane.org; Tue, 19 Apr 2005 23:04:30 +0200
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S261665AbVDSVIf (ORCPT <rfc822;gcvg-git@m.gmane.org>);
	Tue, 19 Apr 2005 17:08:35 -0400
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S261663AbVDSVIf
	(ORCPT <rfc822;git-outgoing>); Tue, 19 Apr 2005 17:08:35 -0400
Received: from ns1.suse.de ([195.135.220.2]:15300 "EHLO mx1.suse.de")
	by vger.kernel.org with ESMTP id S261665AbVDSVI1 (ORCPT
	<rfc822;git@vger.kernel.org>); Tue, 19 Apr 2005 17:08:27 -0400
Received: from extimap.suse.de (extimap.suse.de [195.135.220.6])
	(using TLSv1 with cipher EDH-RSA-DES-CBC3-SHA (168/168 bits))
	(No client certificate requested)
	by mx1.suse.de (Postfix) with ESMTP id 57F531608B0E;
	Tue, 19 Apr 2005 23:08:26 +0200 (CEST)
To: Linus Torvalds <torvalds@osdl.org>
User-Agent: KMail/1.8
In-Reply-To: <Pine.LNX.4.58.0504191143220.19286@ppc970.osdl.org>
Content-Disposition: inline
Sender: git-owner@vger.kernel.org
Precedence: bulk
X-Mailing-List: git@vger.kernel.org
Status: RO

On Tuesday 19 April 2005 15:03, Linus Torvalds wrote:
> On Tue, 19 Apr 2005, Chris Mason wrote:
> > Very true, you can't replace quilt with git without ruining both of them.
> >  But it would be nice to take a quilt tree and turn it into a git tree
> > for merging purposes, or to make use of whatever visualization tools
> > might exist someday.
>
> Fair enough. The thing is, going from quilt->git really is a pretty "big
> decision", since it's the decision that says "I will now really commit all
> this quilt changes forever and ever".
>
> Which is also why I think it's actually ok to take a minute to do 100
> quilt patches. This is not something you do on a whim. It's something
> you'd better think about. It's turning a very fluid environment into a
> unchangable, final thing.
>

It's only final when someone pulls from you...for me, all the trees would be 
temporary.

[ ... subtree tree hashes in the index file ... ]

> I'll think about it. I'd love to speed up write-tree, and keeping track of
> it in the index is a nice little trick, but it's not quite high enough up
> on my worries for me to act on it right now.
>
> But if you want to try to see how nasty it would be to add tree index
> entries to the index file at "write-tree" time automatically, hey...
>

Makes sense, I'll let the merge development frenzy die down and give it a try 
one weekend.  I might look into making it a special case of the merging index 
changes, since some of the concepts seem similar.

Regardless, putting it into the index somehow should be fastest, I'll see what 
I can do.

-chris
-
To unsubscribe from this list: send the line "unsubscribe git" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  http://vger.kernel.org/majordomo-info.html



From news@gmane.org Tue Mar 04 03:33:20 2003
From: Christian Meder <chris@absolutegiganten.org>
Subject: wit 0.0.2 - a web interface for git available
Date: Tue, 19 Apr 2005 23:15:32 +0200
Lines: 37
Message-ID: <1113945332.3309.15.camel@localhost>
Mime-Version: 1.0
Content-Type: text/plain
Content-Transfer-Encoding: 7bit
X-From: git-owner@vger.kernel.org Tue Apr 19 23:13:18 2005
Return-path: <git-owner@vger.kernel.org>
Received: from vger.kernel.org ([12.107.209.244])
	by ciao.gmane.org with esmtp (Exim 4.43)
	id 1DO01B-00058c-TZ
	for gcvg-git@gmane.org; Tue, 19 Apr 2005 23:12:26 +0200
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S261688AbVDSVQI (ORCPT <rfc822;gcvg-git@m.gmane.org>);
	Tue, 19 Apr 2005 17:16:08 -0400
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S261686AbVDSVQI
	(ORCPT <rfc822;git-outgoing>); Tue, 19 Apr 2005 17:16:08 -0400
Received: from shadow.prohost.de ([216.71.84.228]:40440 "EHLO
	shadow.prohost.de") by vger.kernel.org with ESMTP id S261692AbVDSVPs
	(ORCPT <rfc822;git@vger.kernel.org>);
	Tue, 19 Apr 2005 17:15:48 -0400
Received: from blue (p54A251DB.dip.t-dialin.net [84.162.81.219])
	by shadow.prohost.de (8.11.6/8.11.6) with ESMTP id j3JLFZW25656
	for <git@vger.kernel.org>; Tue, 19 Apr 2005 23:15:35 +0200
To: git@vger.kernel.org
X-Mailer: Evolution 2.0.4 
Sender: git-owner@vger.kernel.org
Precedence: bulk
X-Mailing-List: git@vger.kernel.org
Status: RO

Hi,

I've uploaded a new wit to http://www.absolutegiganten.org/wit

Wit is a web interface for git. Right now it includes: views of blob,
commit and tree objects, generating patches for the commits, downloading
of gz or bzip2 tarballs of trees.

It's easy to setup and a simple stand alone server configuration is
included.

Changes:

* the html doesn't look like total crap anymore
* generates patches against one parent on the fly
* generates gz or bzip2 tarballs on the fly

Feedback is greatly appreciated.

Greetings,


				Christian
  
-- 
Christian Meder, email: chris@absolutegiganten.org

The Way-Seeking Mind of a tenzo is actualized 
by rolling up your sleeves.

                (Eihei Dogen Zenji)

-
To unsubscribe from this list: send the line "unsubscribe git" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  http://vger.kernel.org/majordomo-info.html



From news@gmane.org Tue Mar 04 03:33:20 2003
From: Linus Torvalds <torvalds@osdl.org>
Subject: Re: [PATCH] write-tree performance problems
Date: Tue, 19 Apr 2005 14:23:33 -0700 (PDT)
Lines: 24
Message-ID: <Pine.LNX.4.58.0504191420060.19286@ppc970.osdl.org>
References: <200504191250.10286.mason@suse.com> <200504191412.00227.mason@suse.com>
 <Pine.LNX.4.58.0504191143220.19286@ppc970.osdl.org> <200504191708.23536.mason@suse.com>
Mime-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
Cc: git@vger.kernel.org
X-From: git-owner@vger.kernel.org Tue Apr 19 23:18:31 2005
Return-path: <git-owner@vger.kernel.org>
Received: from vger.kernel.org ([12.107.209.244])
	by ciao.gmane.org with esmtp (Exim 4.43)
	id 1DO06T-0005pe-H6
	for gcvg-git@gmane.org; Tue, 19 Apr 2005 23:17:53 +0200
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S261693AbVDSVVy (ORCPT <rfc822;gcvg-git@m.gmane.org>);
	Tue, 19 Apr 2005 17:21:54 -0400
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S261695AbVDSVVy
	(ORCPT <rfc822;git-outgoing>); Tue, 19 Apr 2005 17:21:54 -0400
Received: from fire.osdl.org ([65.172.181.4]:2221 "EHLO smtp.osdl.org")
	by vger.kernel.org with ESMTP id S261693AbVDSVVm (ORCPT
	<rfc822;git@vger.kernel.org>); Tue, 19 Apr 2005 17:21:42 -0400
Received: from shell0.pdx.osdl.net (fw.osdl.org [65.172.181.6])
	by smtp.osdl.org (8.12.8/8.12.8) with ESMTP id j3JLLZs4018723
	(version=TLSv1/SSLv3 cipher=EDH-RSA-DES-CBC3-SHA bits=168 verify=NO);
	Tue, 19 Apr 2005 14:21:36 -0700
Received: from localhost (shell0.pdx.osdl.net [10.9.0.31])
	by shell0.pdx.osdl.net (8.13.1/8.11.6) with ESMTP id j3JLLZdP032710;
	Tue, 19 Apr 2005 14:21:35 -0700
To: Chris Mason <mason@suse.com>
In-Reply-To: <200504191708.23536.mason@suse.com>
X-Spam-Status: No, hits=0 required=5 tests=
X-Spam-Checker-Version: SpamAssassin 2.63-osdl_revision__1.35__
X-MIMEDefang-Filter: osdl$Revision: 1.109 $
X-Scanned-By: MIMEDefang 2.36
Sender: git-owner@vger.kernel.org
Precedence: bulk
X-Mailing-List: git@vger.kernel.org
Status: RO



On Tue, 19 Apr 2005, Chris Mason wrote:
> 
> Regardless, putting it into the index somehow should be fastest, I'll see what 
> I can do.

Start by putting it in at "read-tree" time, and adding the code to
invalidate all parent directory indexes when somebody changes a file in
the index (ie "update-cache" for anything but a "--refresh").

That would be needed anyway, since those two are the ones that already
change the index file.

Once you're sure that you can correctly invalidate the entries (so that
you could never use a stale tree entry by mistake), the second stage would
be to update it at "write-tree" time.

		Linus
-
To unsubscribe from this list: send the line "unsubscribe git" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  http://vger.kernel.org/majordomo-info.html



From news@gmane.org Tue Mar 04 03:33:20 2003
From: Petr Baudis <pasky@ucw.cz>
Subject: Bug in merge-base
Date: Tue, 19 Apr 2005 23:31:43 +0200
Lines: 33
Message-ID: <20050419213143.GC9305@pasky.ji.cz>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Cc: git@vger.kernel.org
X-From: git-owner@vger.kernel.org Tue Apr 19 23:28:17 2005
Return-path: <git-owner@vger.kernel.org>
Received: from vger.kernel.org ([12.107.209.244])
	by ciao.gmane.org with esmtp (Exim 4.43)
	id 1DO0Fx-0007D4-66
	for gcvg-git@gmane.org; Tue, 19 Apr 2005 23:27:41 +0200
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S261667AbVDSVbu (ORCPT <rfc822;gcvg-git@m.gmane.org>);
	Tue, 19 Apr 2005 17:31:50 -0400
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S261264AbVDSVbu
	(ORCPT <rfc822;git-outgoing>); Tue, 19 Apr 2005 17:31:50 -0400
Received: from w241.dkm.cz ([62.24.88.241]:59078 "HELO machine.sinus.cz")
	by vger.kernel.org with SMTP id S261667AbVDSVbt (ORCPT
	<rfc822;git@vger.kernel.org>); Tue, 19 Apr 2005 17:31:49 -0400
Received: (qmail 22328 invoked by uid 2001); 19 Apr 2005 21:31:43 -0000
To: barkalow@iabervon.org
Content-Disposition: inline
User-Agent: Mutt/1.4i
X-message-flag: Outlook : A program to spread viri, but it can do mail too.
Sender: git-owner@vger.kernel.org
Precedence: bulk
X-Mailing-List: git@vger.kernel.org
Status: RO

  Hello,

  I've hit a strange bug in merge-base I don't want to debug now. ;-)
I've been doing my regular git pull test from my main branch, but
suddenly git merge wanted to do a tree merge instead of fast-forward.
What went wrong?

  The commits tree looks like:

  36c764 -- 808162 -- ...... -- 8e08e7
  5b53d3 -'

(see the rev-tree output at
http://pasky.or.cz/~pasky/dev/git/stuff/rev-tree)

  The problem is, merge-base hints me wrong:

  $ merge-base 8e08e7 808162
5b53d3

instead of 808162.

  Thanks,

-- 
				Petr "Pasky" Baudis
Stuff: http://pasky.or.cz/
C++: an octopus made by nailing extra legs onto a dog. -- Steve Taylor
-
To unsubscribe from this list: send the line "unsubscribe git" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  http://vger.kernel.org/majordomo-info.html



From news@gmane.org Tue Mar 04 03:33:20 2003
From: Greg KH <greg@kroah.com>
Subject: Re: [GIT PATCH] I2C and W1 bugfixes for 2.6.12-rc2
Date: Tue, 19 Apr 2005 14:40:09 -0700
Lines: 53
Message-ID: <20050419214009.GA25681@kroah.com>
References: <20050419043938.GA23724@kroah.com> <20050419185807.GA1191@kroah.com> <Pine.LNX.4.58.0504191204480.19286@ppc970.osdl.org> <20050419194728.GA24367@kroah.com> <Pine.LNX.4.58.0504191316180.19286@ppc970.osdl.org>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Cc: Git Mailing List <git@vger.kernel.org>,
	linux-kernel@vger.kernel.org, sensors@stimpy.netroedge.com
X-From: git-owner@vger.kernel.org Tue Apr 19 23:37:26 2005
Return-path: <git-owner@vger.kernel.org>
Received: from vger.kernel.org ([12.107.209.244])
	by ciao.gmane.org with esmtp (Exim 4.43)
	id 1DO0Ox-0008M2-RW
	for gcvg-git@gmane.org; Tue, 19 Apr 2005 23:37:00 +0200
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S261264AbVDSVkq (ORCPT <rfc822;gcvg-git@m.gmane.org>);
	Tue, 19 Apr 2005 17:40:46 -0400
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S261671AbVDSVkq
	(ORCPT <rfc822;git-outgoing>); Tue, 19 Apr 2005 17:40:46 -0400
Received: from mail.kroah.org ([69.55.234.183]:10679 "EHLO perch.kroah.org")
	by vger.kernel.org with ESMTP id S261264AbVDSVkf (ORCPT
	<rfc822;git@vger.kernel.org>); Tue, 19 Apr 2005 17:40:35 -0400
Received: from [192.168.0.10] (c-24-22-118-199.hsd1.or.comcast.net [24.22.118.199])
	(authenticated)
	by perch.kroah.org (8.11.6/8.11.6) with ESMTP id j3JLeVi16401;
	Tue, 19 Apr 2005 14:40:32 -0700
Received: from greg by echidna.kroah.org with local (masqmail 0.2.19)
 id 1DO0S2-6ia-00; Tue, 19 Apr 2005 14:40:10 -0700
To: Linus Torvalds <torvalds@osdl.org>
Content-Disposition: inline
In-Reply-To: <Pine.LNX.4.58.0504191316180.19286@ppc970.osdl.org>
User-Agent: Mutt/1.5.8i
Sender: git-owner@vger.kernel.org
Precedence: bulk
X-Mailing-List: git@vger.kernel.org
Status: RO

On Tue, Apr 19, 2005 at 01:20:47PM -0700, Linus Torvalds wrote:
> 
> 
> On Tue, 19 Apr 2005, Greg KH wrote:
> > 
> > Ok, if you want some practice with "real" merges, feel free to merge from
> > the following two trees whenever you are ready:
> > 	kernel.org/pub/scm/linux/kernel/git/gregkh/aoe-2.6.git/
> > for 11 aoe bugfix patches, and:
> > 	kernel.org/pub/scm/linux/kernel/git/gregkh/driver-2.6.git/
> > for 13 driver core, sysfs, and debugfs fixes.
> 
> Done, pushed out. Can you verify that the end result looks sane to you? I 
> just cheched that the diffstat looks similar (mine claims just 108 lines 
> changed in aoecmd.c - possibly due to different diff formats).

Looks good to me (the diffstat difference is probably because the
patches were consecutive, and the sum of them are smaller (modifying
same parts of the files, etc.))

The git-changes-script shows that you picked up everything from my trees
successfully (assuming we trust that so far) and a raw diff looks good
too.

Two "odd" things in the changelog:

commit caaaaebc2380426b64aaa60a169834a7aefc956c
tree 484292d57c19acbf04cf5c783e7d26181b95e96e
parent 334a4e1b19f7f471594f7abd3bfead3720c1bd61
author Hugh Dickins <hugh@veritas.com> Wed, 20 Apr 2005 03:29:23 -0700
committer Linus Torvalds <torvalds@ppc970.osdl.org.(none)> Wed, 20 Apr 2005 03:29:23 -0700

It looks like your domain name isn't set up properly for your box (which
is why it worked for you, but not me before, causing that patch).

Also the date is in the future with the -0700, yet the time is in UTC.
Oh wait, that's a 'git log' thing, the raw changeset is correct, I guess
I'll wait for Pasky to fix that :)

> And yes, my new merge thing seems to have kept the index-cache much better 
> up-to-date, allowing an optimized checkout-cache -f -a to work and only 
> get the new files.

Very nice.

thanks,

greg k-h
-
To unsubscribe from this list: send the line "unsubscribe git" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  http://vger.kernel.org/majordomo-info.html



From news@gmane.org Tue Mar 04 03:33:20 2003
From: Linus Torvalds <torvalds@osdl.org>
Subject: Re: [GIT PATCH] I2C and W1 bugfixes for 2.6.12-rc2
Date: Tue, 19 Apr 2005 15:00:04 -0700 (PDT)
Lines: 47
Message-ID: <Pine.LNX.4.58.0504191449270.2274@ppc970.osdl.org>
References: <20050419043938.GA23724@kroah.com> <20050419185807.GA1191@kroah.com>
 <Pine.LNX.4.58.0504191204480.19286@ppc970.osdl.org> <20050419194728.GA24367@kroah.com>
 <Pine.LNX.4.58.0504191316180.19286@ppc970.osdl.org> <20050419214009.GA25681@kroah.com>
Mime-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
Cc: Git Mailing List <git@vger.kernel.org>
X-From: git-owner@vger.kernel.org Tue Apr 19 23:55:24 2005
Return-path: <git-owner@vger.kernel.org>
Received: from vger.kernel.org ([12.107.209.244])
	by ciao.gmane.org with esmtp (Exim 4.43)
	id 1DO0fb-00029W-5L
	for gcvg-git@gmane.org; Tue, 19 Apr 2005 23:54:11 +0200
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S261674AbVDSV6N (ORCPT <rfc822;gcvg-git@m.gmane.org>);
	Tue, 19 Apr 2005 17:58:13 -0400
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S261682AbVDSV6N
	(ORCPT <rfc822;git-outgoing>); Tue, 19 Apr 2005 17:58:13 -0400
Received: from fire.osdl.org ([65.172.181.4]:43446 "EHLO smtp.osdl.org")
	by vger.kernel.org with ESMTP id S261674AbVDSV6I (ORCPT
	<rfc822;git@vger.kernel.org>); Tue, 19 Apr 2005 17:58:08 -0400
Received: from shell0.pdx.osdl.net (fw.osdl.org [65.172.181.6])
	by smtp.osdl.org (8.12.8/8.12.8) with ESMTP id j3JLw6s4021325
	(version=TLSv1/SSLv3 cipher=EDH-RSA-DES-CBC3-SHA bits=168 verify=NO);
	Tue, 19 Apr 2005 14:58:07 -0700
Received: from localhost (shell0.pdx.osdl.net [10.9.0.31])
	by shell0.pdx.osdl.net (8.13.1/8.11.6) with ESMTP id j3JLw5Tr002012;
	Tue, 19 Apr 2005 14:58:06 -0700
To: Greg KH <greg@kroah.com>
In-Reply-To: <20050419214009.GA25681@kroah.com>
X-Spam-Status: No, hits=0 required=5 tests=
X-Spam-Checker-Version: SpamAssassin 2.63-osdl_revision__1.35__
X-MIMEDefang-Filter: osdl$Revision: 1.109 $
X-Scanned-By: MIMEDefang 2.36
Sender: git-owner@vger.kernel.org
Precedence: bulk
X-Mailing-List: git@vger.kernel.org
Status: RO



On Tue, 19 Apr 2005, Greg KH wrote:
> 
> It looks like your domain name isn't set up properly for your box (which
> is why it worked for you, but not me before, causing that patch).

No, I think it's a bug in your domainname changes. I don't think you
should do the domainname at all if the hostname has a dot in it.

Most machines I have access to (and that includes machines that are
professionally maintained, not just my own cruddy setup) says "(none)" to
domainname and have the full hostname in hostname.

And even the ones that use domainname tend to not have a fully qualified 
DNS domain there. You need to use dnsdomainname to get that, and I don't 
even know how to do it with standard libc.

So how about something like this?

(Somebody who actually knows how these things should be done - please feel 
free to pipe up).

		Linus

---
commit-tree.c: 54b636ee1edf596dae1cb9a756eaccdfd5127cef
--- a/commit-tree.c
+++ b/commit-tree.c
@@ -317,8 +317,10 @@ int main(int argc, char **argv)
 	memcpy(realemail, pw->pw_name, len);
 	realemail[len] = '@';
 	gethostname(realemail+len+1, sizeof(realemail)-len-1);
-	strcat(realemail, ".");
-	getdomainname(realemail+strlen(realemail), sizeof(realemail)-strlen(realemail)-1);
+	if (!strchr(realemail+len+1, '.')) {
+		strcat(realemail, ".");
+		getdomainname(realemail+strlen(realemail), sizeof(realemail)-strlen(realemail)-1);
+	}
 	time(&now);
 	tm = localtime(&now);
 
-
To unsubscribe from this list: send the line "unsubscribe git" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  http://vger.kernel.org/majordomo-info.html



