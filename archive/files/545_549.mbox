From news@gmane.org Tue Mar 04 03:33:20 2003
From: Daniel Barkalow <barkalow@iabervon.org>
Subject: Re: [2.1/5] Add merge-base
Date: Sun, 17 Apr 2005 17:25:14 -0400 (EDT)
Lines: 27
Message-ID: <Pine.LNX.4.21.0504171722110.30848-100000@iabervon.org>
References: <20050417212116.GK1461@pasky.ji.cz>
Mime-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
Cc: git@vger.kernel.org
X-From: git-owner@vger.kernel.org Sun Apr 17 23:21:12 2005
Return-path: <git-owner@vger.kernel.org>
Received: from vger.kernel.org ([12.107.209.244])
	by ciao.gmane.org with esmtp (Exim 4.43)
	id 1DNHCX-0004Wn-34
	for gcvg-git@gmane.org; Sun, 17 Apr 2005 23:21:09 +0200
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S261481AbVDQVY7 (ORCPT <rfc822;gcvg-git@m.gmane.org>);
	Sun, 17 Apr 2005 17:24:59 -0400
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S261488AbVDQVY7
	(ORCPT <rfc822;git-outgoing>); Sun, 17 Apr 2005 17:24:59 -0400
Received: from iabervon.org ([66.92.72.58]:52231 "EHLO iabervon.org")
	by vger.kernel.org with ESMTP id S261481AbVDQVY5 (ORCPT
	<rfc822;git@vger.kernel.org>); Sun, 17 Apr 2005 17:24:57 -0400
Received: from barkalow (helo=localhost)
	by iabervon.org with local-esmtp (Exim 2.12 #2)
	id 1DNHGU-0002AL-00; Sun, 17 Apr 2005 17:25:14 -0400
To: Petr Baudis <pasky@ucw.cz>
In-Reply-To: <20050417212116.GK1461@pasky.ji.cz>
Sender: git-owner@vger.kernel.org
Precedence: bulk
X-Mailing-List: git@vger.kernel.org
Status: RO

On Sun, 17 Apr 2005, Petr Baudis wrote:

> Dear diary, on Sun, Apr 17, 2005 at 06:51:59PM CEST, I got a letter
> where Daniel Barkalow <barkalow@iabervon.org> told me that...
> > merge-base finds one of the best common ancestors of a pair of commits. In
> > particular, it finds one of the ones which is fewest commits away from the
> > further of the heads.
> > 
> > Signed-Off-By: Daniel Barkalow <barkalow@iabervon.org>
> 
> Note that during merge with Linus (probably the most complicated I've
> got so far, but still thankfully not too painful thanks to the rej
> tool) I've decided to revert your merge-base in favour of Linus'
> version. I did this mainly to make me merging Linus less awful; we
> should probably clean it up first and decide which solution to go for in
> the first place before possibly replacing it again, I think.

Sure. I'm working on the rearrangement now.

	-Daniel
*This .sig left intentionally blank*

-
To unsubscribe from this list: send the line "unsubscribe git" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  http://vger.kernel.org/majordomo-info.html



From news@gmane.org Tue Mar 04 03:33:20 2003
From: Jochen Roemling <jochen@roemling.net>
Subject: Re: Re-done kernel archive - real one?
Date: Sun, 17 Apr 2005 23:50:40 +0200
Lines: 30
Message-ID: <4262DA30.2030500@roemling.net>
References: <Pine.LNX.4.58.0504161543590.7211@ppc970.osdl.org>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1;
	format=flowed
Content-Transfer-Encoding: QUOTED-PRINTABLE
Cc: Git Mailing List <git@vger.kernel.org>
X-From: git-owner@vger.kernel.org Sun Apr 17 23:48:13 2005
Return-path: <git-owner@vger.kernel.org>
Received: from vger.kernel.org ([12.107.209.244])
	by ciao.gmane.org with esmtp (Exim 4.43)
	id 1DNHbx-0006qq-HA
	for gcvg-git@gmane.org; Sun, 17 Apr 2005 23:47:25 +0200
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S261497AbVDQVvB convert rfc822-to-quoted-printable (ORCPT
	<rfc822;gcvg-git@m.gmane.org>); Sun, 17 Apr 2005 17:51:01 -0400
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S261498AbVDQVvB
	(ORCPT <rfc822;git-outgoing>); Sun, 17 Apr 2005 17:51:01 -0400
Received: from moutng.kundenserver.de ([212.227.126.187]:11754 "EHLO
	moutng.kundenserver.de") by vger.kernel.org with ESMTP
	id S261497AbVDQVur (ORCPT <rfc822;git@vger.kernel.org>);
	Sun, 17 Apr 2005 17:50:47 -0400
Received: from pD9E68CCA.dip.t-dialin.net[217.230.140.202] (helo=[10.3.24.50])
	by mrelayeu.kundenserver.de with ESMTP (Nemesis),
	id 0ML25U-1DNHf605SG-0003qq; Sun, 17 Apr 2005 23:50:40 +0200
User-Agent: Debian Thunderbird 1.0 (X11/20050116)
X-Accept-Language: en-us, en
To: Linus Torvalds <torvalds@osdl.org>
In-Reply-To: <Pine.LNX.4.58.0504161543590.7211@ppc970.osdl.org>
X-Provags-ID: kundenserver.de abuse@kundenserver.de login:35bace2e8eeec41a1b9500b782c09cc4
Sender: git-owner@vger.kernel.org
Precedence: bulk
X-Mailing-List: git@vger.kernel.org
Status: RO

Linus Torvalds wrote:

>Ie we have two phases to the merge: first get the objects, with someth=
ing
>like
>
>	repo=3Dkernel.org:/pub/kernel/people/torvalds/linux-2.6.git
>	rsync --ignore-existing -acv $(repo)/ .git/
> =20
>
Could you place a tarball there for people like me who are no "real"=20
kernel hackers and don't have a kernel.org account? Or is there an=20
"anonymous" account that I'm just to ignorant to know of?

I'm just somebody who is very interested in the new things happening=20
here, but I guess there will be some month to go and a lot of things to=
=20
learn until you see the first kernel patch that is signed off by me. :-=
)

By the way: Does the git repository include all 60.000 changes of just=20
the latest version of the 17.000 file in the kernel?

Best regards
Jochen R=F6mling
-
To unsubscribe from this list: send the line "unsubscribe git" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  http://vger.kernel.org/majordomo-info.html



From news@gmane.org Tue Mar 04 03:33:20 2003
From: David Woodhouse <dwmw2@infradead.org>
Subject: Re: Re-done kernel archive - real one?
Date: Mon, 18 Apr 2005 07:52:15 +1000
Lines: 18
Message-ID: <1113774736.3884.4.camel@localhost.localdomain>
References: <Pine.LNX.4.58.0504161543590.7211@ppc970.osdl.org>
Mime-Version: 1.0
Content-Type: text/plain
Content-Transfer-Encoding: 7bit
Cc: Git Mailing List <git@vger.kernel.org>, Peter Anvin <hpa@zytor.com>
X-From: git-owner@vger.kernel.org Sun Apr 17 23:49:01 2005
Return-path: <git-owner@vger.kernel.org>
Received: from vger.kernel.org ([12.107.209.244])
	by ciao.gmane.org with esmtp (Exim 4.43)
	id 1DNHdC-0006xr-7v
	for gcvg-git@gmane.org; Sun, 17 Apr 2005 23:48:42 +0200
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S261498AbVDQVwe (ORCPT <rfc822;gcvg-git@m.gmane.org>);
	Sun, 17 Apr 2005 17:52:34 -0400
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S261499AbVDQVwd
	(ORCPT <rfc822;git-outgoing>); Sun, 17 Apr 2005 17:52:33 -0400
Received: from pentafluge.infradead.org ([213.146.154.40]:37063 "EHLO
	pentafluge.infradead.org") by vger.kernel.org with ESMTP
	id S261498AbVDQVwc (ORCPT <rfc822;git@vger.kernel.org>);
	Sun, 17 Apr 2005 17:52:32 -0400
Received: from [203.53.50.91] (helo=[172.18.240.72])
	by pentafluge.infradead.org with esmtpsa (Exim 4.43 #1 (Red Hat Linux))
	id 1DNHgs-00035Q-6d; Sun, 17 Apr 2005 22:52:31 +0100
To: Linus Torvalds <torvalds@osdl.org>
In-Reply-To: <Pine.LNX.4.58.0504161543590.7211@ppc970.osdl.org>
X-Mailer: Evolution 2.2.1.1 (2.2.1.1-2) 
X-Spam-Score: 0.0 (/)
X-SRS-Rewrite: SMTP reverse-path rewritten from <dwmw2@infradead.org> by pentafluge.infradead.org
	See http://www.infradead.org/rpr.html
Sender: git-owner@vger.kernel.org
Precedence: bulk
X-Mailing-List: git@vger.kernel.org
Status: RO

On Sat, 2005-04-16 at 16:01 -0700, Linus Torvalds wrote:
> So I re-created the dang thing (hey, it takes just a few minutes), and
> pushed it out, and there's now an archive on kernel.org in my public
> "personal" directory called "linux-2.6.git". I'll continue the tradition
> of naming git-archive directories as "*.git", since that really ends up
> being the ".git" directory for the checked-out thing.

Do you want the commits list running for it yet? Do you want the
changesets which are already in it re-mailed without a 'TESTING' tag?

-- 
dwmw2

-
To unsubscribe from this list: send the line "unsubscribe git" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  http://vger.kernel.org/majordomo-info.html



From news@gmane.org Tue Mar 04 03:33:20 2003
From: Junio C Hamano <junkio@cox.net>
Subject: (Resend) [PATCH] checkout-cache -a should not extract unmerged
 stages
Date: Sun, 17 Apr 2005 15:00:14 -0700
Lines: 143
Message-ID: <7vis2lvzbl.fsf@assigned-by-dhcp.cox.net>
References: <7vy8bi0y2k.fsf@assigned-by-dhcp.cox.net>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Cc: git@vger.kernel.org
X-From: git-owner@vger.kernel.org Sun Apr 17 23:57:35 2005
Return-path: <git-owner@vger.kernel.org>
Received: from vger.kernel.org ([12.107.209.244])
	by ciao.gmane.org with esmtp (Exim 4.43)
	id 1DNHlH-0007gZ-E3
	for gcvg-git@gmane.org; Sun, 17 Apr 2005 23:57:03 +0200
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S261499AbVDQWAj (ORCPT <rfc822;gcvg-git@m.gmane.org>);
	Sun, 17 Apr 2005 18:00:39 -0400
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S261500AbVDQWAj
	(ORCPT <rfc822;git-outgoing>); Sun, 17 Apr 2005 18:00:39 -0400
Received: from fed1rmmtao11.cox.net ([68.230.241.28]:26549 "EHLO
	fed1rmmtao11.cox.net") by vger.kernel.org with ESMTP
	id S261499AbVDQWAQ (ORCPT <rfc822;git@vger.kernel.org>);
	Sun, 17 Apr 2005 18:00:16 -0400
Received: from assigned-by-dhcp.cox.net ([68.4.60.172])
          by fed1rmmtao11.cox.net
          (InterMail vM.6.01.04.00 201-2131-118-20041027) with ESMTP
          id <20050417220014.PTEO22013.fed1rmmtao11.cox.net@assigned-by-dhcp.cox.net>;
          Sun, 17 Apr 2005 18:00:14 -0400
To: Linus Torvalds <torvalds@osdl.org>, Petr Baudis <pasky@ucw.cz>
In-Reply-To: <7vy8bi0y2k.fsf@assigned-by-dhcp.cox.net> (Junio C. Hamano's
 message of "Sat, 16 Apr 2005 22:30:43 -0700")
User-Agent: Gnus/5.1007 (Gnus v5.10.7) Emacs/21.4 (gnu/linux)
Sender: git-owner@vger.kernel.org
Precedence: bulk
X-Mailing-List: git@vger.kernel.org
Status: RO

Linus,

    do you have any particular reason you did not want the patch
to skip unmerged ones when "checkout-cache -a" is done, and if
so could you let me know?

Here is what happens before the patch:

    $ ls -al
    total 16
    drwxrwsr-x  3 junio src 4096 Apr 17 14:30 ./
    drwxrwsr-x  8 junio src 4096 Apr 17 14:17 ../
    drwxr-sr-x  3 junio src 4096 Apr 17 14:30 .git/
    -rw-rw-r--  1 junio src   29 Apr 17 14:30 SS
    $ show-files --stage
    100644 9e26851b98ab7dd3a3b9653a2efb9b4de0465310 0 SS
    100644 e14bafaadce6c34768ba2ff8b3c6419e8839e7d2 1 TT
    100644 99ef1b30fc6d6ea186d6eac62619e1afd65ad64e 2 TT
    100644 033b9385f7a29882a6b4b34f67b20e2304d3489d 3 TT
    $ ../++linus/checkout-cache -a
    checkout-cache: SS already exists
    checkout-cache: TT already exists
    checkout-cache: TT already exists
    $ ls -al
    total 20
    drwxrwsr-x  3 junio src 4096 Apr 17 14:31 ./
    drwxrwsr-x  8 junio src 4096 Apr 17 14:17 ../
    drwxr-sr-x  3 junio src 4096 Apr 17 14:30 .git/
    -rw-rw-r--  1 junio src   29 Apr 17 14:30 SS
    -rw-rw-r--  1 junio src  363 Apr 17 14:31 TT

See those two warning for TT?  It has extracted stage 1 and
complaining about what it has done when it goes on to extract
stage 2 and 3.

At this point what is in TT is from the stage 1.

This behaviour is somewhat defensible, in that you are giving
the user a ready access to the "original" (from stage 1), and he
can continue cat-file blob other stages to decide what to do.
But I think that the way the user wants to resolve the unmerged
state is not our business and it is not particulary useful for
the plumbing layer to assume that he would always need stage 1
contents to arrive the merged result (e.g. sdiff between stage 2
and stage 3 would not require stage 1).

With the patch, you get this:

    $ checkout-cache -a
    checkout-cache: SS already exists
    checkout-cache: needs merge TT
    $ ls -al
    total 16
    drwxrwsr-x  3 junio src 4096 Apr 17 14:32 ./
    drwxrwsr-x  8 junio src 4096 Apr 17 14:17 ../
    drwxr-sr-x  3 junio src 4096 Apr 17 14:30 .git/
    -rw-rw-r--  1 junio src   29 Apr 17 14:30 SS

I think it is consistent with this behaviour you already have
merged:

    $ ../++linus/checkout-cache SS TT
    checkout-cache: SS already exists
    checkout-cache: TT is unmerged.
    $ ls -al
    total 16
    drwxrwsr-x  3 junio src 4096 Apr 17 14:32 ./
    drwxrwsr-x  8 junio src 4096 Apr 17 14:17 ../
    drwxr-sr-x  3 junio src 4096 Apr 17 14:30 .git/
    -rw-rw-r--  1 junio src   29 Apr 17 14:30 SS

Attached is a re-diff with an updated message.  

I could also send you a patch that implements an alternative
strategy.  With or without "-a", checkout of unmerged files can
result in something like this:

    $ checkout-cache -a
    checkout-cache: SS already exists
    checkout-cache: storing stage 1 for TT in TT~1~
    checkout-cache: storing stage 2 for TT in TT~2~
    checkout-cache: storing stage 3 for TT in TT~3~
    $ ls -al
    total 28
    drwxrwsr-x  3 junio src 4096 Apr 17 14:55 ./
    drwxrwsr-x  8 junio src 4096 Apr 17 14:17 ../
    drwxr-sr-x  3 junio src 4096 Apr 17 14:30 .git/
    -rw-rw-r--  1 junio src   29 Apr 17 14:30 SS
    -rw-rw-r--  1 junio src  363 Apr 17 14:55 TT~1
    -rw-rw-r--  1 junio src  363 Apr 17 14:55 TT~2
    -rw-rw-r--  1 junio src  363 Apr 17 14:55 TT~3

Maybe these two behaviours can be controlled with another
option (say, -m).

Petr, do you think this alternative behaviour would be useful
for Cogito when it starts using "read-tree -m"?

----------------------------------------------------------------
When checkout-cache -a is run, currently it attempts to extract
all existing unmerged stages to the same destination and
complains to what it itself has done for the first stage when it
tries to extract the later stages.  This is nonsensical.  Just
report the unmerged state and let the user sort the mess out
using "show-files --unmerged" and "cat-file blob".

Signed-off-by: Junio C Hamano <junkio@cox.net>
---

 checkout-cache.c |   11 +++++++++++
 1 files changed, 11 insertions(+)

--- ++linus/checkout-cache.c	2005-04-17 13:57:04.000000000 -0700
+++ ++junio/checkout-cache.c	2005-04-17 14:35:11.000000000 -0700
@@ -137,10 +137,21 @@
 
 static int checkout_all(void)
 {
+	struct cache_entry *unmerge_skipping = NULL;
 	int i;
 
 	for (i = 0; i < active_nr ; i++) {
 		struct cache_entry *ce = active_cache[i];
+		if (ce_stage(ce)) {
+			if (!unmerge_skipping ||
+			    strcmp(unmerge_skipping->name, ce->name))
+				fprintf(stderr,
+					"checkout-cache: needs merge %s\n",
+					ce->name);
+			unmerge_skipping = ce;
+			continue;
+		}
+		unmerge_skipping = NULL;
 		if (checkout_entry(ce) < 0)
 			return -1;
 	}


-
To unsubscribe from this list: send the line "unsubscribe git" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  http://vger.kernel.org/majordomo-info.html



