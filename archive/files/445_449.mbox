From news@gmane.org Tue Mar 04 03:33:20 2003
From: Steven Cole <elenstev@mesatop.com>
Subject: [PATCH] Add lsremote command.
Date: Sat, 16 Apr 2005 23:36:51 -0600
Lines: 65
Message-ID: <200504162336.51937.elenstev@mesatop.com>
Mime-Version: 1.0
Content-Type: Multipart/Mixed;
  boundary="Boundary-00=_zXfYCc2u3EvKYfj"
Cc: git@vger.kernel.org
X-From: git-owner@vger.kernel.org Sun Apr 17 07:37:13 2005
Return-path: <git-owner@vger.kernel.org>
Received: from vger.kernel.org ([12.107.209.244])
	by ciao.gmane.org with esmtp (Exim 4.43)
	id 1DN2T3-00009W-19
	for gcvg-git@gmane.org; Sun, 17 Apr 2005 07:37:13 +0200
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S261265AbVDQFky (ORCPT <rfc822;gcvg-git@m.gmane.org>);
	Sun, 17 Apr 2005 01:40:54 -0400
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S261266AbVDQFky
	(ORCPT <rfc822;git-outgoing>); Sun, 17 Apr 2005 01:40:54 -0400
Received: from taco.zianet.com ([216.234.192.159]:37638 "HELO taco.zianet.com")
	by vger.kernel.org with SMTP id S261265AbVDQFko (ORCPT
	<rfc822;git@vger.kernel.org>); Sun, 17 Apr 2005 01:40:44 -0400
Received: (qmail 97938 invoked from network); 17 Apr 2005 05:40:42 -0000
Received: from 216-31-65-116.zianet.com (216.31.65.116)
  by 0 with SMTP; 17 Apr 2005 05:40:42 -0000
To: Petr Baudis <pasky@ucw.cz>
User-Agent: KMail/1.6.1
Content-Disposition: inline
Sender: git-owner@vger.kernel.org
Precedence: bulk
X-Mailing-List: git@vger.kernel.org
Status: RO


--Boundary-00=_zXfYCc2u3EvKYfj
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

This is a fairly trivial addition, but if users are adding remote repositories
with git addremote, then those users should be able to list out the remote
list without having to know the details of where the remotes file is kept.

Steven


--Boundary-00=_zXfYCc2u3EvKYfj
Content-Type: text/x-diff;
  charset="us-ascii";
  name="add-lsremote-command.diff"
Content-Transfer-Encoding: 7bit
Content-Disposition: attachment;
	filename="add-lsremote-command.diff"

Adds lsremote command to list remotes.

Signed-Off-By: Steven Cole <elenstev@mesatop.com>

-------------

diff -urN git-pasky-orig/git git-pasky/git
--- git-pasky-orig/git	2005-04-16 22:47:22.000000000 -0600
+++ git-pasky/git	2005-04-16 22:49:14.000000000 -0600
@@ -41,6 +41,7 @@
 	log
 	ls		[TREE_ID]
 	lsobj		[OBJTYPE]
+	lsremote
 	merge		-b BASE_ID FROM_ID
 	pull		[RNAME]
 	rm		FILE...
@@ -105,6 +106,7 @@
 "log")        gitlog.sh "$@";;
 "ls")         gitls.sh "$@";;
 "lsobj")      gitlsobj.sh "$@";;
+"lsremote")   gitlsremote.sh "$@";;
 "merge")      gitmerge.sh "$@";;
 "pull")       gitpull.sh "$@";;
 "rm")         gitrm.sh "$@";;
diff -urN git-pasky-orig/gitlsremote.sh git-pasky/gitlsremote.sh
--- git-pasky-orig/gitlsremote.sh	1969-12-31 17:00:00.000000000 -0700
+++ git-pasky/gitlsremote.sh	2005-04-16 22:58:15.000000000 -0600
@@ -0,0 +1,7 @@
+#!/bin/sh
+#
+# ls remotes in GIT repository
+#
+[ -e .git/remotes ] && cat .git/remotes && exit 1
+
+echo 'List of remotes is empty. See git addremote.'

--Boundary-00=_zXfYCc2u3EvKYfj--
-
To unsubscribe from this list: send the line "unsubscribe git" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  http://vger.kernel.org/majordomo-info.html



From news@gmane.org Tue Mar 04 03:33:20 2003
From: Junio C Hamano <junkio@cox.net>
Subject: [PATCH] Fix off-by-one error in show-diff
Date: Sat, 16 Apr 2005 22:56:29 -0700
Lines: 29
Message-ID: <7vsm1q0wvm.fsf@assigned-by-dhcp.cox.net>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Cc: git@vger.kernel.org
X-From: git-owner@vger.kernel.org Sun Apr 17 07:52:55 2005
Return-path: <git-owner@vger.kernel.org>
Received: from vger.kernel.org ([12.107.209.244])
	by ciao.gmane.org with esmtp (Exim 4.43)
	id 1DN2iA-0000x6-S8
	for gcvg-git@gmane.org; Sun, 17 Apr 2005 07:52:51 +0200
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S261266AbVDQF4c (ORCPT <rfc822;gcvg-git@m.gmane.org>);
	Sun, 17 Apr 2005 01:56:32 -0400
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S261267AbVDQF4c
	(ORCPT <rfc822;git-outgoing>); Sun, 17 Apr 2005 01:56:32 -0400
Received: from fed1rmmtao10.cox.net ([68.230.241.29]:35286 "EHLO
	fed1rmmtao10.cox.net") by vger.kernel.org with ESMTP
	id S261266AbVDQF4b (ORCPT <rfc822;git@vger.kernel.org>);
	Sun, 17 Apr 2005 01:56:31 -0400
Received: from assigned-by-dhcp.cox.net ([68.4.60.172])
          by fed1rmmtao10.cox.net
          (InterMail vM.6.01.04.00 201-2131-118-20041027) with ESMTP
          id <20050417055628.ERDS2123.fed1rmmtao10.cox.net@assigned-by-dhcp.cox.net>;
          Sun, 17 Apr 2005 01:56:28 -0400
To: Linus Torvalds <torvalds@osdl.org>
Sender: git-owner@vger.kernel.org
Precedence: bulk
X-Mailing-List: git@vger.kernel.org
Status: RO

The patch to introduce shell safety to show-diff has an
off-by-one error.  Here is an fix.

Signed-off-by: Junio C Hamano <junkio@cox.net>
---

 show-diff.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

show-diff.c: 8a24ff62b85a6e23469e3f0e7a20170dfe543ebf
--- show-diff.c
+++ show-diff.c	2005-04-16 22:53:11.000000000 -0700
@@ -27,8 +27,8 @@
 	int cnt, c;
 	char *cp;
 
-	/* count single quote characters */ 
-	for (cnt = 0, cp = src; *cp; cnt++, cp++)
+	/* count bytes needed to store the quoted string. */ 
+	for (cnt = 1, cp = src; *cp; cnt++, cp++)
 		if (*cp == '\'')
 			cnt += 3;
 

-
To unsubscribe from this list: send the line "unsubscribe git" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  http://vger.kernel.org/majordomo-info.html



From news@gmane.org Tue Mar 04 03:33:20 2003
From: Junio C Hamano <junkio@cox.net>
Subject: [PATCH] update-cache --remove marks the path merged.
Date: Sat, 16 Apr 2005 23:00:13 -0700
Lines: 31
Message-ID: <7vpswu0wpe.fsf@assigned-by-dhcp.cox.net>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Cc: git@vger.kernel.org
X-From: git-owner@vger.kernel.org Sun Apr 17 07:56:57 2005
Return-path: <git-owner@vger.kernel.org>
Received: from vger.kernel.org ([12.107.209.244])
	by ciao.gmane.org with esmtp (Exim 4.43)
	id 1DN2ly-00015j-8r
	for gcvg-git@gmane.org; Sun, 17 Apr 2005 07:56:46 +0200
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S261267AbVDQGAU (ORCPT <rfc822;gcvg-git@m.gmane.org>);
	Sun, 17 Apr 2005 02:00:20 -0400
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S261269AbVDQGAU
	(ORCPT <rfc822;git-outgoing>); Sun, 17 Apr 2005 02:00:20 -0400
Received: from fed1rmmtao05.cox.net ([68.230.241.34]:63722 "EHLO
	fed1rmmtao05.cox.net") by vger.kernel.org with ESMTP
	id S261267AbVDQGAP (ORCPT <rfc822;git@vger.kernel.org>);
	Sun, 17 Apr 2005 02:00:15 -0400
Received: from assigned-by-dhcp.cox.net ([68.4.60.172])
          by fed1rmmtao05.cox.net
          (InterMail vM.6.01.04.00 201-2131-118-20041027) with ESMTP
          id <20050417060013.DBNU7956.fed1rmmtao05.cox.net@assigned-by-dhcp.cox.net>;
          Sun, 17 Apr 2005 02:00:13 -0400
To: Linus Torvalds <torvalds@osdl.org>
Sender: git-owner@vger.kernel.org
Precedence: bulk
X-Mailing-List: git@vger.kernel.org
Status: RO

When update-cache --remove is run, resolve unmerged state for
the path.  This is consistent with the update-cache --add
behaviour.  Essentially, the user is telling us how he wants to
resolve the merge by running update-cache.

Signed-off-by: Junio C Hamano <junkio@cox.net>
---

 read-cache.c |    4 +++-
 1 files changed, 3 insertions(+), 1 deletion(-)

read-cache.c: e16c37403092e1e94c50b04685b6417405ffc724
--- read-cache.c
+++ read-cache.c	2005-04-16 22:43:55.000000000 -0700
@@ -368,7 +368,9 @@
 int remove_file_from_cache(char *path)
 {
 	int pos = cache_name_pos(path, strlen(path));
-	if (pos >= 0)
+	if (pos < 0)
+		pos = -pos-1;
+	while (! strcmp(active_cache[pos]->name, path))
 		remove_entry_at(pos);
 	return 0;
 }

-
To unsubscribe from this list: send the line "unsubscribe git" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  http://vger.kernel.org/majordomo-info.html



From news@gmane.org Tue Mar 04 03:33:20 2003
From: Junio C Hamano <junkio@cox.net>
Subject: Re: Issues with higher-order stages in dircache
Date: Sat, 16 Apr 2005 23:01:49 -0700
Lines: 14
Message-ID: <7vll7i0wmq.fsf@assigned-by-dhcp.cox.net>
References: <Pine.LNX.4.58.0504140201130.7211@ppc970.osdl.org>
	<7vmzs1osv1.fsf@assigned-by-dhcp.cox.net>
	<20050414233159.GX22699@pasky.ji.cz>
	<7v7jj4q2j2.fsf@assigned-by-dhcp.cox.net>
	<20050414223039.GB28082@64m.dyndns.org>
	<7vfyxsmqmk.fsf@assigned-by-dhcp.cox.net>
	<20050415062807.GA29841@64m.dyndns.org>
	<7vfyxsi9bq.fsf@assigned-by-dhcp.cox.net>
	<7vaco0i3t9.fsf_-_@assigned-by-dhcp.cox.net>
	<Pine.LNX.4.58.0504151138490.7211@ppc970.osdl.org>
	<7vmzrzhkd3.fsf@assigned-by-dhcp.cox.net>
	<7vfyxrhfsw.fsf_-_@assigned-by-dhcp.cox.net>
	<7vmzrzfwe4.fsf_-_@assigned-by-dhcp.cox.net>
	<Pine.LNX.4.58.0504151755590.7211@ppc970.osdl.org>
	<7v7jj3fjky.fsf@assigned-by-dhcp.cox.net>
	<Pine.LNX.4.58.0504152152580.7211@ppc970.osdl.org>
	<Pine.LNX.4.58.0504152256520.7211@ppc970.osdl.org>
	<7vis2ncf8j.fsf@assigned-by-dhcp.cox.net>
	<7vll7i95u1.fsf_-_@assigned-by-dhcp.cox.net>
	<7v64ym2dju.fsf@assigne
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Cc: git@vger.kernel.org
X-From: git-owner@vger.kernel.org Sun Apr 17 07:58:09 2005
Return-path: <git-owner@vger.kernel.org>
Received: from vger.kernel.org ([12.107.209.244])
	by ciao.gmane.org with esmtp (Exim 4.43)
	id 1DN2nG-000189-OF
	for gcvg-git@gmane.org; Sun, 17 Apr 2005 07:58:07 +0200
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S261269AbVDQGBw (ORCPT <rfc822;gcvg-git@m.gmane.org>);
	Sun, 17 Apr 2005 02:01:52 -0400
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S261270AbVDQGBw
	(ORCPT <rfc822;git-outgoing>); Sun, 17 Apr 2005 02:01:52 -0400
Received: from fed1rmmtao03.cox.net ([68.230.241.36]:54009 "EHLO
	fed1rmmtao03.cox.net") by vger.kernel.org with ESMTP
	id S261269AbVDQGBv (ORCPT <rfc822;git@vger.kernel.org>);
	Sun, 17 Apr 2005 02:01:51 -0400
Received: from assigned-by-dhcp.cox.net ([68.4.60.172])
          by fed1rmmtao03.cox.net
          (InterMail vM.6.01.04.00 201-2131-118-20041027) with ESMTP
          id <20050417060150.VEGC1282.fed1rmmtao03.cox.net@assigned-by-dhcp.cox.net>;
          Sun, 17 Apr 2005 02:01:50 -0400
To: Linus Torvalds <torvalds@osdl.org>
In-Reply-To: <Pine.LNX.4.58.0504162228300.7211@ppc970.osdl.org> (Linus
 Torvalds's message of "Sat, 16 Apr 2005 22:31:26 -0700 (PDT)")
User-Agent: Gnus/5.1007 (Gnus v5.10.7) Emacs/21.4 (gnu/linux)
Sender: git-owner@vger.kernel.org
Precedence: bulk
X-Mailing-List: git@vger.kernel.org
Status: RO

>>>>> "LT" == Linus Torvalds <torvalds@osdl.org> writes:

>> - When merging two trees, i.e. "read-tree -m A B", shouldn't
>> we collapse identical stage-1/2 into stage-0?

LT> How do you actually intend to merge two trees? 

How silly of me.  *BLUSH*

-
To unsubscribe from this list: send the line "unsubscribe git" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  http://vger.kernel.org/majordomo-info.html



