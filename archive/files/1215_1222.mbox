From news@gmane.org Tue Mar 04 03:33:20 2003
From: Junio C Hamano <junio@siamese.dyndns.org>
Subject: Re: [PATCH] Improve usage messages
Date: Thu, 21 Apr 2005 16:02:28 -0700
Lines: 17
Message-ID: <7vll7bd98b.fsf@assigned-by-dhcp.cox.net>
References: <20050421124152.A28137F87D@smurf.noris.de>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Cc: git@vger.kernel.org
X-From: git-owner@vger.kernel.org Fri Apr 22 00:58:39 2005
Return-path: <git-owner@vger.kernel.org>
Received: from vger.kernel.org ([12.107.209.244])
	by ciao.gmane.org with esmtp (Exim 4.43)
	id 1DOkcc-0002uG-TU
	for gcvg-git@gmane.org; Fri, 22 Apr 2005 00:58:11 +0200
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S261637AbVDUXCf (ORCPT <rfc822;gcvg-git@m.gmane.org>);
	Thu, 21 Apr 2005 19:02:35 -0400
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S261656AbVDUXCf
	(ORCPT <rfc822;git-outgoing>); Thu, 21 Apr 2005 19:02:35 -0400
Received: from fed1rmmtao11.cox.net ([68.230.241.28]:36301 "EHLO
	fed1rmmtao11.cox.net") by vger.kernel.org with ESMTP
	id S261637AbVDUXCa (ORCPT <rfc822;git@vger.kernel.org>);
	Thu, 21 Apr 2005 19:02:30 -0400
Received: from assigned-by-dhcp.cox.net ([68.4.60.172])
          by fed1rmmtao11.cox.net
          (InterMail vM.6.01.04.00 201-2131-118-20041027) with ESMTP
          id <20050421230229.EBVR22013.fed1rmmtao11.cox.net@assigned-by-dhcp.cox.net>;
          Thu, 21 Apr 2005 19:02:29 -0400
To: Matthias Urlichs <smurf@smurf.noris.de>
In-Reply-To: <20050421124152.A28137F87D@smurf.noris.de> (Matthias Urlichs's
 message of "Thu, 21 Apr 2005 22:41:52 +1000 (EST)")
User-Agent: Gnus/5.1007 (Gnus v5.10.7) Emacs/21.4 (gnu/linux)
Sender: git-owner@vger.kernel.org
Precedence: bulk
X-Mailing-List: git@vger.kernel.org
Status: RO

>>>>> "MU" == Matthias Urlichs <smurf@smurf.noris.de> writes:

MU> Index: diff-tree.c

MU> +static const char diff_tree_usage[] = 
MU> +	"diff-tree [ -r (recurse) | -z (\\0-terminate) ]"
MU> +		"\n\t<tree sha1> <tree sha1>";

I think we already have this, and Pasky's right to say the
(recurse) and (\0-terminate) should not be there.


-
To unsubscribe from this list: send the line "unsubscribe git" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  http://vger.kernel.org/majordomo-info.html



From news@gmane.org Tue Mar 04 03:33:20 2003
From: Matthias Urlichs <smurf@smurf.noris.de>
Subject: Re: [PATCH] Missing linefeeds
Date: Fri, 22 Apr 2005 01:08:26 +0200
Lines: 14
Message-ID: <20050421230826.GB13311@kiste.smurf.noris.de>
References: <20050421124430.ACDC77F894@smurf.noris.de> <20050421162614.GF30991@pasky.ji.cz>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Cc: git@vger.kernel.org
X-From: git-owner@vger.kernel.org Fri Apr 22 01:06:01 2005
Return-path: <git-owner@vger.kernel.org>
Received: from vger.kernel.org ([12.107.209.244])
	by ciao.gmane.org with esmtp (Exim 4.43)
	id 1DOkk4-0003fb-BX
	for gcvg-git@gmane.org; Fri, 22 Apr 2005 01:05:52 +0200
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S261695AbVDUXKB (ORCPT <rfc822;gcvg-git@m.gmane.org>);
	Thu, 21 Apr 2005 19:10:01 -0400
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S261664AbVDUXKB
	(ORCPT <rfc822;git-outgoing>); Thu, 21 Apr 2005 19:10:01 -0400
Received: from run.smurf.noris.de ([192.109.102.41]:20360 "EHLO
	server.smurf.noris.de") by vger.kernel.org with ESMTP
	id S261695AbVDUXIl (ORCPT <rfc822;git@vger.kernel.org>);
	Thu, 21 Apr 2005 19:08:41 -0400
Received: from kiste.smurf.noris.de ([192.109.102.35] ident=mail)
	by server.smurf.noris.de with smtp (Exim 4.50)
	id 1DOkmY-0005am-E8; Fri, 22 Apr 2005 01:08:39 +0200
Received: (nullmailer pid 14239 invoked by uid 501);
	Thu, 21 Apr 2005 23:08:26 -0000
To: Petr Baudis <pasky@ucw.cz>
Content-Disposition: inline
In-Reply-To: <20050421162614.GF30991@pasky.ji.cz>
User-Agent: Mutt/1.5.6+20040907i
X-Smurf-Spam-Score: -2.5 (--)
X-Smurf-Whitelist: +relay_from_hosts
Sender: git-owner@vger.kernel.org
Precedence: bulk
X-Mailing-List: git@vger.kernel.org
Status: RO

Hi,

Petr Baudis:
> Why? report() already prints linefeed.
> 
Ah, it didn't when I wrote this.

-- 
Matthias Urlichs   |   {M:U} IT Design @ m-u-it.de   |  smurf@smurf.noris.de
-
To unsubscribe from this list: send the line "unsubscribe git" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  http://vger.kernel.org/majordomo-info.html



From news@gmane.org Tue Mar 04 03:33:20 2003
From: Matthias Urlichs <smurf@smurf.noris.de>
Subject: Re: [PATCH] Add DEST Makefile variable
Date: Fri, 22 Apr 2005 01:07:32 +0200
Lines: 23
Message-ID: <20050421230732.GA13311@kiste.smurf.noris.de>
References: <20050421123904.9F2EB7F8AD@smurf.noris.de> <7vr7h3d9cu.fsf@assigned-by-dhcp.cox.net>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Cc: git@vger.kernel.org
X-From: git-owner@vger.kernel.org Fri Apr 22 01:06:55 2005
Return-path: <git-owner@vger.kernel.org>
Received: from vger.kernel.org ([12.107.209.244])
	by ciao.gmane.org with esmtp (Exim 4.43)
	id 1DOkkg-0003k7-6z
	for gcvg-git@gmane.org; Fri, 22 Apr 2005 01:06:30 +0200
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S261712AbVDUXKU (ORCPT <rfc822;gcvg-git@m.gmane.org>);
	Thu, 21 Apr 2005 19:10:20 -0400
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S261708AbVDUXKR
	(ORCPT <rfc822;git-outgoing>); Thu, 21 Apr 2005 19:10:17 -0400
Received: from run.smurf.noris.de ([192.109.102.41]:20360 "EHLO
	server.smurf.noris.de") by vger.kernel.org with ESMTP
	id S261682AbVDUXIk (ORCPT <rfc822;git@vger.kernel.org>);
	Thu, 21 Apr 2005 19:08:40 -0400
Received: from kiste.smurf.noris.de ([192.109.102.35] ident=mail)
	by server.smurf.noris.de with smtp (Exim 4.50)
	id 1DOklg-0005aW-AP; Fri, 22 Apr 2005 01:07:47 +0200
Received: (nullmailer pid 14229 invoked by uid 501);
	Thu, 21 Apr 2005 23:07:32 -0000
To: Junio C Hamano <junio@siamese.dyndns.org>
Content-Disposition: inline
In-Reply-To: <7vr7h3d9cu.fsf@assigned-by-dhcp.cox.net>
User-Agent: Mutt/1.5.6+20040907i
X-Smurf-Spam-Score: -2.5 (--)
X-Smurf-Whitelist: +relay_from_hosts
Sender: git-owner@vger.kernel.org
Precedence: bulk
X-Mailing-List: git@vger.kernel.org
Status: RO

Hi,

Junio C Hamano:
> I sent essentially the same some time ago and got a comment to
> follow established naming convention.
> 
Well, for a Makefile which installs in basically one directory, that
seems to be overkill.

>     # DESTDIR=
>     BINDIR=$(HOME)/bin
>             install foobar $(DESTDIR)$(BINDIR)/
> 
That doesn't make sense; if you set DESTDIR, you are not going to
install in $HOME.

-- 
Matthias Urlichs   |   {M:U} IT Design @ m-u-it.de   |  smurf@smurf.noris.de
-
To unsubscribe from this list: send the line "unsubscribe git" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  http://vger.kernel.org/majordomo-info.html



From news@gmane.org Tue Mar 04 03:33:20 2003
From: David Greaves <david@dgreaves.com>
Subject: Re: [PATCH] Docs update
Date: Fri, 22 Apr 2005 00:10:23 +0100
Lines: 24
Message-ID: <426832DF.4090909@dgreaves.com>
References: <42680FCC.6030901@dgreaves.com> <7vy8bbd9n4.fsf@assigned-by-dhcp.cox.net>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
Cc: Petr Baudis <pasky@ucw.cz>, GIT Mailing Lists <git@vger.kernel.org>
X-From: git-owner@vger.kernel.org Fri Apr 22 01:07:06 2005
Return-path: <git-owner@vger.kernel.org>
Received: from vger.kernel.org ([12.107.209.244])
	by ciao.gmane.org with esmtp (Exim 4.43)
	id 1DOkks-0003kr-Nz
	for gcvg-git@gmane.org; Fri, 22 Apr 2005 01:06:43 +0200
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S261771AbVDUXK5 (ORCPT <rfc822;gcvg-git@m.gmane.org>);
	Thu, 21 Apr 2005 19:10:57 -0400
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S261770AbVDUXK4
	(ORCPT <rfc822;git-outgoing>); Thu, 21 Apr 2005 19:10:56 -0400
Received: from s2.ukfsn.org ([217.158.120.143]:56238 "EHLO mail.ukfsn.org")
	by vger.kernel.org with ESMTP id S261706AbVDUXK3 (ORCPT
	<rfc822;git@vger.kernel.org>); Thu, 21 Apr 2005 19:10:29 -0400
Received: from localhost (lucy.ukfsn.org [127.0.0.1])
	by mail.ukfsn.org (Postfix) with ESMTP
	id A2B80E6D5C; Fri, 22 Apr 2005 00:08:32 +0100 (BST)
Received: from mail.ukfsn.org ([127.0.0.1])
 by localhost (lucy.ukfsn.org [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 13624-09; Fri, 22 Apr 2005 00:08:32 +0100 (BST)
Received: from oak.dgreaves.com (modem-2040.lynx.dialup.pol.co.uk [217.135.199.248])
	by mail.ukfsn.org (Postfix) with ESMTP
	id 0B2C1E6A86; Fri, 22 Apr 2005 00:08:32 +0100 (BST)
Received: from ash.dgreaves.com ([10.0.0.90])
	by oak.dgreaves.com with esmtp (Exim 4.20)
	id 1DOkoR-0002qF-T4; Fri, 22 Apr 2005 00:10:23 +0100
User-Agent: Debian Thunderbird 1.0 (X11/20050116)
X-Accept-Language: en-us, en
To: Junio C Hamano <junio@siamese.dyndns.org>
In-Reply-To: <7vy8bbd9n4.fsf@assigned-by-dhcp.cox.net>
X-Enigmail-Version: 0.90.0.0
X-Enigmail-Supports: pgp-inline, pgp-mime
Sender: git-owner@vger.kernel.org
Precedence: bulk
X-Mailing-List: git@vger.kernel.org
Status: RO

Junio C Hamano wrote:
>>>>>>"DG" == David Greaves <david@dgreaves.com> writes:
> Looks nice.  I agree with Petr's comment that separating core part
> and Cogito part would be good
OK


> And the option to use working tree is not having the --cached
> flag you describe later.  Please also update the usage at the
> top as well:
<snip>
> This command can take commit ID in place of tree ID.

Yep, the intention is to do all the core docs, get consistent use of 
<sha1> or <tree> or <id> etc etc and then patch all the usage()s at once.

Thanks for the comments - will edit in the am.

David
-
To unsubscribe from this list: send the line "unsubscribe git" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  http://vger.kernel.org/majordomo-info.html



From news@gmane.org Tue Mar 04 03:33:20 2003
From: Pavel Roskin <proski@gnu.org>
Subject: [PATCH] README spellcheck again
Date: Thu, 21 Apr 2005 19:20:33 -0400
Lines: 46
Message-ID: <1114125633.17161.3.camel@dv>
Mime-Version: 1.0
Content-Type: text/plain
Content-Transfer-Encoding: 7bit
X-From: git-owner@vger.kernel.org Fri Apr 22 01:16:42 2005
Return-path: <git-owner@vger.kernel.org>
Received: from vger.kernel.org ([12.107.209.244])
	by ciao.gmane.org with esmtp (Exim 4.43)
	id 1DOkuD-0004dN-43
	for gcvg-git@gmane.org; Fri, 22 Apr 2005 01:16:21 +0200
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S261664AbVDUXUp (ORCPT <rfc822;gcvg-git@m.gmane.org>);
	Thu, 21 Apr 2005 19:20:45 -0400
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S261723AbVDUXUp
	(ORCPT <rfc822;git-outgoing>); Thu, 21 Apr 2005 19:20:45 -0400
Received: from h-64-105-159-118.phlapafg.covad.net ([64.105.159.118]:16283
	"EHLO localhost.localdomain") by vger.kernel.org with ESMTP
	id S261664AbVDUXUf (ORCPT <rfc822;git@vger.kernel.org>);
	Thu, 21 Apr 2005 19:20:35 -0400
Received: by localhost.localdomain (Postfix, from userid 500)
	id 017C4EFF81; Thu, 21 Apr 2005 19:20:33 -0400 (EDT)
To: git <git@vger.kernel.org>
X-Mailer: Evolution 2.2.1.1 
Sender: git-owner@vger.kernel.org
Precedence: bulk
X-Mailing-List: git@vger.kernel.org
Status: RO

Hello!

Patch against current git, applies cleanly to both linus and pasky
branches.
Signed-off-by: Pavel Roskin <proski@gnu.org>

--- a/README
+++ b/README
@@ -95,7 +95,7 @@ The object types in some more detail:
 	In particular, since the blob is entirely defined by its data,
 	if two files in a directory tree (or in multiple different
 	versions of the repository) have the same contents, they will
-	share the same blob object. The object is toally independent
+	share the same blob object. The object is totally independent
 	of it's location in the directory tree, and renaming a file does
 	not change the object that file is associated with in any way.
 
@@ -150,7 +150,7 @@ CHANGESET: The "changeset" object is an 
 	actually have any relationship with the result, for example. 
 
 	Note on changesets: unlike real SCM's, changesets do not contain
-	rename information or file mode chane information.  All of that
+	rename information or file mode change information.  All of that
 	is implicit in the trees involved (the result tree, and the
 	result trees of the parents), and describing that makes no sense
 	in this idiotic file manager. 
@@ -322,7 +322,7 @@ main combinations: 
 	changes in your working directory (ie "update-cache").
 
 	However, if you decide to jump to a new version, or check out
-	somebody elses version, or just restore a previous tree, you'd
+	somebody else's version, or just restore a previous tree, you'd
 	populate your index file with read-tree, and then you need to
 	check out the result with
 


-- 
Regards,
Pavel Roskin

-
To unsubscribe from this list: send the line "unsubscribe git" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  http://vger.kernel.org/majordomo-info.html



From news@gmane.org Tue Mar 04 03:33:20 2003
From: "David A. Wheeler" <dwheeler@dwheeler.com>
Subject: Porting to old zlib (deflateBound) & old mktemp (e.g., Red Hat Linux
 9)
Date: Thu, 21 Apr 2005 19:27:57 -0400
Lines: 51
Message-ID: <426836FD.8070708@dwheeler.com>
References: <4267E0A4.40506@austin.ibm.com> <20050421102552.544c70fd.rddunlap@osdl.org>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Cc: jschopp@austin.ibm.com, git@vger.kernel.org
X-From: git-owner@vger.kernel.org Fri Apr 22 01:23:47 2005
Return-path: <git-owner@vger.kernel.org>
Received: from vger.kernel.org ([12.107.209.244])
	by ciao.gmane.org with esmtp (Exim 4.43)
	id 1DOl1J-0005GO-It
	for gcvg-git@gmane.org; Fri, 22 Apr 2005 01:23:41 +0200
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S261682AbVDUX2H (ORCPT <rfc822;gcvg-git@m.gmane.org>);
	Thu, 21 Apr 2005 19:28:07 -0400
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S261723AbVDUX2H
	(ORCPT <rfc822;git-outgoing>); Thu, 21 Apr 2005 19:28:07 -0400
Received: from cujo.runbox.com ([193.71.199.138]:9112 "EHLO cujo.runbox.com")
	by vger.kernel.org with ESMTP id S261682AbVDUX2B (ORCPT
	<rfc822;git@vger.kernel.org>); Thu, 21 Apr 2005 19:28:01 -0400
Received: from [10.9.9.110] (helo=snoopy.runbox.com)
	by greyhound.runbox.com with esmtp (Exim 4.34)
	id 1DOl5Q-0000go-4N; Fri, 22 Apr 2005 01:27:56 +0200
Received: from [129.246.254.211] (helo=[129.246.80.140])
	by snoopy.runbox.com with asmtp (uid:258406) (Exim 4.34)
	id 1DOl5P-00068S-Pr; Fri, 22 Apr 2005 01:27:56 +0200
User-Agent: Mozilla Thunderbird 1.0.2 (Windows/20050317)
X-Accept-Language: en-us, en
To: "Randy.Dunlap" <rddunlap@osdl.org>
In-Reply-To: <20050421102552.544c70fd.rddunlap@osdl.org>
X-Sender: 258406@vger.kernel.org
Sender: git-owner@vger.kernel.org
Precedence: bulk
X-Mailing-List: git@vger.kernel.org
Status: RO

On Thu, 21 Apr 2005 12:19:32 -0500 Joel Schopp wrote:

>| I downloaded git-pasky 0.6.2.  I cannot compile it because my zlib 
>| version is 1.1.4 and git-pasky relies on function deflateBound() which 
>| wasn't introduced until zlib version 1.2.x  Is there a patch out there 
>| to work around this and maybe conditionally compile based on the zlib 
>| version?
>  
>
Here's a quick (read: nasty, dreadful) hack to port git
to older systems like Red Hat Linux 9 which have old versions
of zlib & mktemp. Someone who actually spent two seconds
on this can no doubt give you a better solution, but it "worked for me".

Edit sha1_file.c, and change the line:
 size = deflateBound(&stream, len);
to
 size = len + 1024; /* 1024=emergency extra space */
The "deflateBound" call just finds out the maximum amount of allocation 
space.
The documentation says that "deflateBound() may return a
conservative value that may be larger than /sourceLen/" in certain cases,
which worried me. So to be safe I just added a big pile of excess space 
to "len";
I suspect that "size = len" is sufficient but I didn't investigate it.

If you're trying to get this to work on Red Hat Linux 9, you'll
have another problem too: old versions of "mktemp"
don't support the "-t" option. Other old distributions will
have the same problem.  To find these cases, do:
 grep "mktemp.*-t" *
and edit all the files to remove the "-t" option from mktemp.
That's the bare minimum to make it work; a much
cleaner solution would to specify the tempdir, e.g.,:
 mktemp ${TMPDIR:-/tmp/}gitci.XXXXX
or even more portably, write the shell code to set TMPDIR to "/tmp"
locally if it's not set, then use $TMPDIR everywhere.

Not a good final solution, but enough to get started in the interim.
In long term, this should be made more portable, but it's
only ~2 weeks old after all.  Some people are trying to fly this plane
to transport a buffalo herd, while others are working to attach the 
wings :-).

--- David A. Wheeler

-
To unsubscribe from this list: send the line "unsubscribe git" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  http://vger.kernel.org/majordomo-info.html



From news@gmane.org Tue Mar 04 03:33:20 2003
From: Pavel Roskin <proski@gnu.org>
Subject: Re: [PATCH] Add DEST Makefile variable
Date: Thu, 21 Apr 2005 19:37:04 -0400
Lines: 78
Message-ID: <1114126624.17161.19.camel@dv>
References: <20050421123904.9F2EB7F8AD@smurf.noris.de>
	 <7vr7h3d9cu.fsf@assigned-by-dhcp.cox.net>
	 <20050421230732.GA13311@kiste.smurf.noris.de>
Mime-Version: 1.0
Content-Type: text/plain
Content-Transfer-Encoding: 7bit
Cc: Junio C Hamano <junio@siamese.dyndns.org>, git@vger.kernel.org
X-From: git-owner@vger.kernel.org Fri Apr 22 01:33:12 2005
Return-path: <git-owner@vger.kernel.org>
Received: from vger.kernel.org ([12.107.209.244])
	by ciao.gmane.org with esmtp (Exim 4.43)
	id 1DOlAE-000639-Q0
	for gcvg-git@gmane.org; Fri, 22 Apr 2005 01:32:55 +0200
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S261528AbVDUXhS (ORCPT <rfc822;gcvg-git@m.gmane.org>);
	Thu, 21 Apr 2005 19:37:18 -0400
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S261548AbVDUXhS
	(ORCPT <rfc822;git-outgoing>); Thu, 21 Apr 2005 19:37:18 -0400
Received: from h-64-105-159-118.phlapafg.covad.net ([64.105.159.118]:6299 "EHLO
	localhost.localdomain") by vger.kernel.org with ESMTP
	id S261528AbVDUXhF (ORCPT <rfc822;git@vger.kernel.org>);
	Thu, 21 Apr 2005 19:37:05 -0400
Received: by localhost.localdomain (Postfix, from userid 500)
	id 6D5A0EFF81; Thu, 21 Apr 2005 19:37:04 -0400 (EDT)
To: Matthias Urlichs <smurf@smurf.noris.de>
In-Reply-To: <20050421230732.GA13311@kiste.smurf.noris.de>
X-Mailer: Evolution 2.2.1.1 
Sender: git-owner@vger.kernel.org
Precedence: bulk
X-Mailing-List: git@vger.kernel.org
Status: RO

Hello!

On Fri, 2005-04-22 at 01:07 +0200, Matthias Urlichs wrote:
> Hi,
> 
> Junio C Hamano:
> > I sent essentially the same some time ago and got a comment to
> > follow established naming convention.
> > 
> Well, for a Makefile which installs in basically one directory, that
> seems to be overkill.
> 
> >     # DESTDIR=
> >     BINDIR=$(HOME)/bin
> >             install foobar $(DESTDIR)$(BINDIR)/
> > 
> That doesn't make sense; if you set DESTDIR, you are not going to
> install in $HOME.

It makes sense to stick with conventions.  DESTDIR is almost always set
by a script for making a package, and that script will likely set prefix
to /usr.

prefix is set to $HOME temporarily.  It should be changed to /usr/local
some day.  It's not uncommon for $HOME to be shared between systems with
different architectures, so ideally no binaries should be installed
there.  I guess $HOME is used to save typing "su" or redefining prefix
in a project that changes every 10 minutes or so.  But once git
stabilizes, there will be no excuse.

By the way, we need to change prefix and bindir to be lowercase for
compatibility with GNU standards.  Also, ifdef is not needed - command
line trumps even unconditional variable assignments.  Another thing to
fix - DESTDIR is not used when bindir is created.

Signed-off-by: Pavel Roskin <proski@gnu.org>

--- a/Makefile
+++ b/Makefile
@@ -14,12 +14,10 @@
 # (my ext3 doesn't).
 CFLAGS=-g -O2 -Wall
 
-ifndef PREFIX
-PREFIX=$(HOME)
-endif
-ifndef BINDIR
-BINDIR=$(PREFIX)/bin
-endif
+# Should be changed to /usr/local
+prefix=$(HOME)
+
+bindir=$(prefix)/bin
 
 CC=gcc
 AR=ar
@@ -81,8 +79,8 @@ gitversion.sh: $(VERSION)
 
 
 install: $(PROG) $(GEN_SCRIPT)
-	install -m755 -d $(BINDIR)
-	install $(PROG) $(SCRIPT) $(GEN_SCRIPT) $(DESTDIR)$(BINDIR)
+	install -m755 -d $(DESTDIR)$(bindir)
+	install $(PROG) $(SCRIPT) $(GEN_SCRIPT) $(DESTDIR)$(bindir)
 
 clean:
 	rm -f *.o mozilla-sha1/*.o $(PROG) $(GEN_SCRIPT) $(LIB_FILE)


-- 
Regards,
Pavel Roskin

-
To unsubscribe from this list: send the line "unsubscribe git" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  http://vger.kernel.org/majordomo-info.html



From news@gmane.org Tue Mar 04 03:33:20 2003
From: Chris Mason <mason@suse.com>
Subject: Re: [PATCH] multi item packed files
Date: Thu, 21 Apr 2005 20:16:16 -0400
Lines: 33
Message-ID: <200504212016.16729.mason@suse.com>
References: <200504211113.13630.mason@suse.com> <200504211622.48065.mason@suse.com> <Pine.LNX.4.58.0504211530370.2344@ppc970.osdl.org>
Mime-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Cc: Krzysztof Halasa <khc@pm.waw.pl>, git@vger.kernel.org
X-From: git-owner@vger.kernel.org Fri Apr 22 02:14:37 2005
Return-path: <git-owner@vger.kernel.org>
Received: from vger.kernel.org ([12.107.209.244])
	by ciao.gmane.org with esmtp (Exim 4.43)
	id 1DOloT-0001Bl-BV
	for gcvg-git@gmane.org; Fri, 22 Apr 2005 02:14:29 +0200
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
	id S261820AbVDVASl (ORCPT <rfc822;gcvg-git@m.gmane.org>);
	Thu, 21 Apr 2005 20:18:41 -0400
Received: (majordomo@vger.kernel.org) by vger.kernel.org id S261749AbVDVARZ
	(ORCPT <rfc822;git-outgoing>); Thu, 21 Apr 2005 20:17:25 -0400
Received: from mx2.suse.de ([195.135.220.15]:22755 "EHLO mx2.suse.de")
	by vger.kernel.org with ESMTP id S261790AbVDVAQU (ORCPT
	<rfc822;git@vger.kernel.org>); Thu, 21 Apr 2005 20:16:20 -0400
Received: from extimap.suse.de (extimap.suse.de [195.135.220.6])
	(using TLSv1 with cipher EDH-RSA-DES-CBC3-SHA (168/168 bits))
	(No client certificate requested)
	by mx2.suse.de (Postfix) with ESMTP id 0D617880F;
	Fri, 22 Apr 2005 02:16:20 +0200 (CEST)
Received: from watt.suse.com (cpe-66-66-175-36.rochester.res.rr.com [66.66.175.36])
	(using TLSv1 with cipher RC4-MD5 (128/128 bits))
	(Client did not present a certificate)
	by extimap.suse.de (Postfix) with ESMTP
	id 92E6F1162D9; Fri, 22 Apr 2005 02:16:19 +0200 (CEST)
To: Linus Torvalds <torvalds@osdl.org>
User-Agent: KMail/1.8
In-Reply-To: <Pine.LNX.4.58.0504211530370.2344@ppc970.osdl.org>
Content-Disposition: inline
Sender: git-owner@vger.kernel.org
Precedence: bulk
X-Mailing-List: git@vger.kernel.org
Status: RO

On Thursday 21 April 2005 18:47, Linus Torvalds wrote:
> On Thu, 21 Apr 2005, Chris Mason wrote:
> > Shrug, we shouldn't need help from the kernel for something like this. 
> > git as a database hits worst case scenarios for almost every FS.

[ ... ]

We somewhat agree on most of this, I snipped out the parts that aren't worth 
nitpicking over.  git is really fast right now, and I'm all for throwing 
drive space at things to solve problems.  I just don't think we have to throw 
as much space at it as we are.

> The _seek_ issue is real, but git actually has a very nice architecture
> even there: not only dos it cache really really well (and you can do a
> simple "ls-tree $(cat .git/HEAD)" and populate the case from the results),
> but the low level of indirection in a git archive means that it's almost
> totally prefetchable with near-perfect access patterns.

We can sort by the files before reading them in, but even if we order things 
perfectly, we're spreading the io out too much across the drive. It works 
right now because the git archive is relatively dense.  At a few hundred MB 
when we order things properly the drive head isn't moving that much.

At 3-6 GB this hurts more.  The data gets farther apart as things age, and 
drive performance rots away.  I'll never convince you without numbers, which 
means I'll have to wait for the full load of old history and try it out ;)

-chris
-
To unsubscribe from this list: send the line "unsubscribe git" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  http://vger.kernel.org/majordomo-info.html



